{"version":3,"sources":["webpack:///node_modules/@microsoft/signalr/dist/esm/IHubProtocol.js","webpack:///node_modules/@microsoft/signalr/dist/esm/FetchHttpClient.js","webpack:///node_modules/@microsoft/signalr/dist/esm/HttpConnection.js","webpack:///node_modules/@microsoft/signalr/dist/esm/JsonHubProtocol.js","webpack:///node_modules/@microsoft/signalr/dist/esm/AbortController.js","webpack:///node_modules/@microsoft/signalr/dist/esm/index.js","webpack:///node_modules/@microsoft/signalr/dist/esm/WebSocketTransport.js","webpack:///node_modules/@microsoft/signalr/dist/esm/Errors.js","webpack:///src/app/features/modules/notification/notification/notification.component.html","webpack:///node_modules/@microsoft/signalr/dist/esm/LongPollingTransport.js","webpack:///node_modules/@microsoft/signalr/dist/esm/XhrHttpClient.js","webpack:///src/app/features/modules/notification/notification/notification.component.ts","webpack:///node_modules/@microsoft/signalr/dist/esm/ILogger.js","webpack:///node_modules/@microsoft/signalr/dist/esm/TextMessageFormat.js","webpack:///node_modules/@microsoft/signalr/dist/esm/HttpClient.js","webpack:///src/app/features/modules/notification/notification-routing.module.ts","webpack:///node_modules/@microsoft/signalr/dist/esm/DefaultHttpClient.js","webpack:///node_modules/@microsoft/signalr/dist/esm/HandshakeProtocol.js","webpack:///node_modules/@microsoft/signalr/dist/esm/Utils.js","webpack:///src/app/features/modules/notification/notification/notification.component.less","webpack:///node_modules/@microsoft/signalr/dist/esm/DefaultReconnectPolicy.js","webpack:///node_modules/@microsoft/signalr/dist/esm/HubConnection.js","webpack:///node_modules/@microsoft/signalr/dist/esm/ITransport.js","webpack:///node_modules/@microsoft/signalr/dist/esm/ServerSentEventsTransport.js","webpack:///node_modules/@microsoft/signalr/dist/esm/HubConnectionBuilder.js","webpack:///node_modules/@microsoft/signalr/dist/esm/Loggers.js","webpack:///node_modules/@microsoft/signalr/dist/esm/Subject.js","webpack:///src/app/features/modules/notification/notification.module.ts"],"names":["MessageType","__extends","extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","FetchHttpClient","_super","logger","_this","fetch","requireFunc","jar","CookieJar","fetchType","abortControllerType","bind","self","AbortController","send","request","abortController","error","timeoutId","msTimeout","response","e_1","content","payload","_a","abortSignal","aborted","method","Error","url","onabort","abort","timeout","setTimeout","log","Warning","cache","credentials","withCredentials","headers","mode","redirect","signal","clearTimeout","ok","statusText","status","deserializeContent","responseType","getCookieString","cookies","isNode","getCookies","c","join","arrayBuffer","text","MAX_REDIRECTS","HttpConnection","options","features","negotiateVersion","isRequired","baseUrl","resolveUrl","logMessageContent","undefined","webSocketModule","eventSourceModule","WebSocket","EventSource","httpClient","connectionState","connectionStarted","onreceive","onclose","start","transferFormat","message","Binary","isIn","Debug","startInternalPromise","startInternal","stopPromise","data","sendQueue","TransportSendQueue","transport","stop","stopPromiseResolver","stopInternal","e_2","stopError","stopConnection","negotiateResponse","redirects","_loop_1","this_1","e_3","accessTokenFactory","skipNegotiation","WebSockets","constructTransport","startTransport","accessToken_1","getNegotiationResponse","ProtocolVersion","accessToken","createTransport","inherentKeepAlive","token","name","negotiateUrl","e_4","_b","resolveNegotiateUrl","post","statusCode","JSON","parse","connectionToken","connectionId","createConnectUrl","indexOf","requestedTransport","requestedTransferFormat","connectUrl","transportExceptions","transports","negotiate","_i","transports_1","endpoint","transportOrError","ex_1","ex_2","isITransport","availableTransports","resolveTransportOrError","ServerSentEvents","LongPolling","connect","transportMatches","transferFormats","map","ex","Information","lastIndexOf","isBrowser","window","document","aTag","createElement","href","index","substring","actualTransport","buffer","executing","sendBufferedData","PromiseSource","transportResult","sendLoopPromise","sendLoop","bufferData","promise","error_1","concatBuffers","arrayBuffers","totalLength","byteLength","reduce","a","Uint8Array","offset","arrayBuffers_1","item","set","resolver","rejecter","reason","JSON_HUB_PROTOCOL_NAME","JsonHubProtocol","version","Text","parseMessages","input","instance","messages","hubMessages","messages_1","parsedMessage","type","Invocation","isInvocationMessage","StreamItem","isStreamItemMessage","Completion","isCompletionMessage","Ping","Close","writeMessage","write","stringify","assertNotEmptyString","target","invocationId","errorMessage","isAborted","defineProperty","get","enumerable","configurable","WebSocketTransport","webSocketConstructor","Trace","encodeURIComponent","replace","webSocket","opened","name_1","binaryType","onopen","_event","onerror","event","ErrorEvent","onmessage","close","readyState","OPEN","isCloseEvent","wasClean","code","HttpError","_newTarget","trueProto","TimeoutError","AbortError","LongPollingTransport","pollAbort","running","pollOptions","pollUrl","_c","XMLHttpRequest","getAccessToken","updateHeaderToken","Date","now","closeError","receiving","poll","pollAborted","raiseOnClose","deleteOptions","logMessage","XhrHttpClient","xhr","open","setRequestHeader","keys","forEach","header","onload","responseText","ontimeout","NotificationComponent","fontSize","notificationList","isLoading","isNotificationListOpen","startOfIndex","isNotificationVisible","startIndexScroll","host","apiUrl","notificationCount","emit","selector","template","LogLevel","TextMessageFormat","output","RecordSeparator","split","RecordSeparatorCode","String","fromCharCode","HttpResponse","HttpClient","routes","NotificationRoutingModule","imports","forChild","exports","DefaultHttpClient","HandshakeProtocol","writeHandshakeRequest","handshakeRequest","parseHandshakeResponse","responseMessage","messageData","remainingData","Buffer","binaryData","separatorIndex","responseLength","slice","textData","VERSION","Arg","val","isNotEmpty","match","values","Platform","isWebWorker","getDataDetail","includeContent","detail","isArrayBuffer","formatArrayBuffer","view","str","num","pad","toString","substr","ArrayBuffer","sendMessage","transportName","defaultHeaders","getUserAgentHeader","createLogger","ConsoleLogger","SubjectSubscription","subject","observer","dispose","observers","splice","cancelCallback","minimumLogLevel","outputConsole","console","logLevel","Critical","toISOString","warn","info","userAgentHeaderName","constructUserAgent","getOsName","getRuntime","getRuntimeVersion","os","runtime","runtimeVersion","userAgent","majorAndMinor","process","platform","versions","node","DEFAULT_RETRY_DELAYS_IN_MILLISECONDS","DefaultReconnectPolicy","retryDelays","concat","nextRetryDelayInMilliseconds","retryContext","previousRetryCount","DEFAULT_TIMEOUT_IN_MS","DEFAULT_PING_INTERVAL_IN_MS","HubConnectionState","HubConnection","connection","protocol","reconnectPolicy","serverTimeoutInMilliseconds","keepAliveIntervalInMilliseconds","handshakeProtocol","processIncomingData","connectionClosed","callbacks","methods","closedCallbacks","reconnectingCallbacks","reconnectedCallbacks","receivedHandshakeResponse","Disconnected","cachedPingMessage","Reconnecting","startPromise","startWithStateTransitions","Connecting","Connected","handshakePromise","stopDuringStartError","handshakeResolver","handshakeRejecter","cleanupTimeout","resetTimeoutPeriod","resetKeepAliveInterval","cleanupPingTimer","Disconnecting","reconnectDelayHandle","completeClose","stream","methodName","args","replaceStreamingParams","streams","streamIds","invocationDescriptor","createStreamInvocation","promiseQueue","cancelInvocation","createCancelInvocation","sendWithProtocol","invocationEvent","complete","launchStreams","sendPromise","createInvocation","invoke","on","newMethod","toLowerCase","off","handlers","removeIdx","callback","onreconnecting","onreconnected","processHandshakeResponse","invokeClientMethod","allowReconnect","pingServerHandle","timeoutHandle","serverTimeout","invocationMessage","m","cancelCallbacksWithError","reconnect","reconnectStartTime","previousReconnectAttempts","retryError","nextRetryDelay","getNextRetryDelay","elapsedMilliseconds","retryReason","key","nonblocking","streamId","subscribe","createCompletionMessage","err","createStreamItemMessage","argument","isObservable","arg","StreamInvocation","id","CancelInvocation","HttpTransportType","TransferFormat","ServerSentEventsTransport","eventSourceConstructor","eventSource","Cookie","LogLevelNameMapping","trace","debug","information","warning","critical","none","None","parseLogLevel","mapping","HubConnectionBuilder","configureLogging","logging","isLogger","withUrl","transportTypeOrOptions","httpConnectionOptions","withHubProtocol","withAutomaticReconnect","retryDelaysOrReconnectPolicy","isArray","build","NullLogger","_logLevel","_message","Subject","NotificationModule","declarations"],"mappings":"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","file":"default~features-customer-customer-module~features-seller-seller-module-es5.js","sourcesContent":["// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\n/** Defines the type of a Hub Message. */\r\nexport var MessageType;\r\n(function (MessageType) {\r\n    /** Indicates the message is an Invocation message and implements the {@link @microsoft/signalr.InvocationMessage} interface. */\r\n    MessageType[MessageType[\"Invocation\"] = 1] = \"Invocation\";\r\n    /** Indicates the message is a StreamItem message and implements the {@link @microsoft/signalr.StreamItemMessage} interface. */\r\n    MessageType[MessageType[\"StreamItem\"] = 2] = \"StreamItem\";\r\n    /** Indicates the message is a Completion message and implements the {@link @microsoft/signalr.CompletionMessage} interface. */\r\n    MessageType[MessageType[\"Completion\"] = 3] = \"Completion\";\r\n    /** Indicates the message is a Stream Invocation message and implements the {@link @microsoft/signalr.StreamInvocationMessage} interface. */\r\n    MessageType[MessageType[\"StreamInvocation\"] = 4] = \"StreamInvocation\";\r\n    /** Indicates the message is a Cancel Invocation message and implements the {@link @microsoft/signalr.CancelInvocationMessage} interface. */\r\n    MessageType[MessageType[\"CancelInvocation\"] = 5] = \"CancelInvocation\";\r\n    /** Indicates the message is a Ping message and implements the {@link @microsoft/signalr.PingMessage} interface. */\r\n    MessageType[MessageType[\"Ping\"] = 6] = \"Ping\";\r\n    /** Indicates the message is a Close message and implements the {@link @microsoft/signalr.CloseMessage} interface. */\r\n    MessageType[MessageType[\"Close\"] = 7] = \"Close\";\r\n})(MessageType || (MessageType = {}));\r\n//# sourceMappingURL=IHubProtocol.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { AbortError, HttpError, TimeoutError } from \"./Errors\";\r\nimport { HttpClient, HttpResponse } from \"./HttpClient\";\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { Platform } from \"./Utils\";\r\nvar FetchHttpClient = /** @class */ (function (_super) {\r\n    __extends(FetchHttpClient, _super);\r\n    function FetchHttpClient(logger) {\r\n        var _this = _super.call(this) || this;\r\n        _this.logger = logger;\r\n        if (typeof fetch === \"undefined\") {\r\n            // In order to ignore the dynamic require in webpack builds we need to do this magic\r\n            // @ts-ignore: TS doesn't know about these names\r\n            var requireFunc = typeof __webpack_require__ === \"function\" ? __non_webpack_require__ : require;\r\n            // Cookies aren't automatically handled in Node so we need to add a CookieJar to preserve cookies across requests\r\n            _this.jar = new (requireFunc(\"tough-cookie\")).CookieJar();\r\n            _this.fetchType = requireFunc(\"node-fetch\");\r\n            // node-fetch doesn't have a nice API for getting and setting cookies\r\n            // fetch-cookie will wrap a fetch implementation with a default CookieJar or a provided one\r\n            _this.fetchType = requireFunc(\"fetch-cookie\")(_this.fetchType, _this.jar);\r\n            // Node needs EventListener methods on AbortController which our custom polyfill doesn't provide\r\n            _this.abortControllerType = requireFunc(\"abort-controller\");\r\n        }\r\n        else {\r\n            _this.fetchType = fetch.bind(self);\r\n            _this.abortControllerType = AbortController;\r\n        }\r\n        return _this;\r\n    }\r\n    /** @inheritDoc */\r\n    FetchHttpClient.prototype.send = function (request) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var abortController, error, timeoutId, msTimeout, response, e_1, content, payload;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        // Check that abort was not signaled before calling send\r\n                        if (request.abortSignal && request.abortSignal.aborted) {\r\n                            throw new AbortError();\r\n                        }\r\n                        if (!request.method) {\r\n                            throw new Error(\"No method defined.\");\r\n                        }\r\n                        if (!request.url) {\r\n                            throw new Error(\"No url defined.\");\r\n                        }\r\n                        abortController = new this.abortControllerType();\r\n                        // Hook our abortSignal into the abort controller\r\n                        if (request.abortSignal) {\r\n                            request.abortSignal.onabort = function () {\r\n                                abortController.abort();\r\n                                error = new AbortError();\r\n                            };\r\n                        }\r\n                        timeoutId = null;\r\n                        if (request.timeout) {\r\n                            msTimeout = request.timeout;\r\n                            timeoutId = setTimeout(function () {\r\n                                abortController.abort();\r\n                                _this.logger.log(LogLevel.Warning, \"Timeout from HTTP request.\");\r\n                                error = new TimeoutError();\r\n                            }, msTimeout);\r\n                        }\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, 4, 5]);\r\n                        return [4 /*yield*/, this.fetchType(request.url, {\r\n                                body: request.content,\r\n                                cache: \"no-cache\",\r\n                                credentials: request.withCredentials === true ? \"include\" : \"same-origin\",\r\n                                headers: __assign({ \"Content-Type\": \"text/plain;charset=UTF-8\", \"X-Requested-With\": \"XMLHttpRequest\" }, request.headers),\r\n                                method: request.method,\r\n                                mode: \"cors\",\r\n                                redirect: \"manual\",\r\n                                signal: abortController.signal,\r\n                            })];\r\n                    case 2:\r\n                        response = _a.sent();\r\n                        return [3 /*break*/, 5];\r\n                    case 3:\r\n                        e_1 = _a.sent();\r\n                        if (error) {\r\n                            throw error;\r\n                        }\r\n                        this.logger.log(LogLevel.Warning, \"Error from HTTP request. \" + e_1 + \".\");\r\n                        throw e_1;\r\n                    case 4:\r\n                        if (timeoutId) {\r\n                            clearTimeout(timeoutId);\r\n                        }\r\n                        if (request.abortSignal) {\r\n                            request.abortSignal.onabort = null;\r\n                        }\r\n                        return [7 /*endfinally*/];\r\n                    case 5:\r\n                        if (!response.ok) {\r\n                            throw new HttpError(response.statusText, response.status);\r\n                        }\r\n                        content = deserializeContent(response, request.responseType);\r\n                        return [4 /*yield*/, content];\r\n                    case 6:\r\n                        payload = _a.sent();\r\n                        return [2 /*return*/, new HttpResponse(response.status, response.statusText, payload)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    FetchHttpClient.prototype.getCookieString = function (url) {\r\n        var cookies = \"\";\r\n        if (Platform.isNode && this.jar) {\r\n            // @ts-ignore: unused variable\r\n            this.jar.getCookies(url, function (e, c) { return cookies = c.join(\"; \"); });\r\n        }\r\n        return cookies;\r\n    };\r\n    return FetchHttpClient;\r\n}(HttpClient));\r\nexport { FetchHttpClient };\r\nfunction deserializeContent(response, responseType) {\r\n    var content;\r\n    switch (responseType) {\r\n        case \"arraybuffer\":\r\n            content = response.arrayBuffer();\r\n            break;\r\n        case \"text\":\r\n            content = response.text();\r\n            break;\r\n        case \"blob\":\r\n        case \"document\":\r\n        case \"json\":\r\n            throw new Error(responseType + \" is not supported.\");\r\n        default:\r\n            content = response.text();\r\n            break;\r\n    }\r\n    return content;\r\n}\r\n//# sourceMappingURL=FetchHttpClient.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { DefaultHttpClient } from \"./DefaultHttpClient\";\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { HttpTransportType, TransferFormat } from \"./ITransport\";\r\nimport { LongPollingTransport } from \"./LongPollingTransport\";\r\nimport { ServerSentEventsTransport } from \"./ServerSentEventsTransport\";\r\nimport { Arg, createLogger, getUserAgentHeader, Platform } from \"./Utils\";\r\nimport { WebSocketTransport } from \"./WebSocketTransport\";\r\nvar MAX_REDIRECTS = 100;\r\n/** @private */\r\nvar HttpConnection = /** @class */ (function () {\r\n    function HttpConnection(url, options) {\r\n        if (options === void 0) { options = {}; }\r\n        this.features = {};\r\n        this.negotiateVersion = 1;\r\n        Arg.isRequired(url, \"url\");\r\n        this.logger = createLogger(options.logger);\r\n        this.baseUrl = this.resolveUrl(url);\r\n        options = options || {};\r\n        options.logMessageContent = options.logMessageContent === undefined ? false : options.logMessageContent;\r\n        if (typeof options.withCredentials === \"boolean\" || options.withCredentials === undefined) {\r\n            options.withCredentials = options.withCredentials === undefined ? true : options.withCredentials;\r\n        }\r\n        else {\r\n            throw new Error(\"withCredentials option was not a 'boolean' or 'undefined' value\");\r\n        }\r\n        var webSocketModule = null;\r\n        var eventSourceModule = null;\r\n        if (Platform.isNode && typeof require !== \"undefined\") {\r\n            // In order to ignore the dynamic require in webpack builds we need to do this magic\r\n            // @ts-ignore: TS doesn't know about these names\r\n            var requireFunc = typeof __webpack_require__ === \"function\" ? __non_webpack_require__ : require;\r\n            webSocketModule = requireFunc(\"ws\");\r\n            eventSourceModule = requireFunc(\"eventsource\");\r\n        }\r\n        if (!Platform.isNode && typeof WebSocket !== \"undefined\" && !options.WebSocket) {\r\n            options.WebSocket = WebSocket;\r\n        }\r\n        else if (Platform.isNode && !options.WebSocket) {\r\n            if (webSocketModule) {\r\n                options.WebSocket = webSocketModule;\r\n            }\r\n        }\r\n        if (!Platform.isNode && typeof EventSource !== \"undefined\" && !options.EventSource) {\r\n            options.EventSource = EventSource;\r\n        }\r\n        else if (Platform.isNode && !options.EventSource) {\r\n            if (typeof eventSourceModule !== \"undefined\") {\r\n                options.EventSource = eventSourceModule;\r\n            }\r\n        }\r\n        this.httpClient = options.httpClient || new DefaultHttpClient(this.logger);\r\n        this.connectionState = \"Disconnected\" /* Disconnected */;\r\n        this.connectionStarted = false;\r\n        this.options = options;\r\n        this.onreceive = null;\r\n        this.onclose = null;\r\n    }\r\n    HttpConnection.prototype.start = function (transferFormat) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var message, message;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        transferFormat = transferFormat || TransferFormat.Binary;\r\n                        Arg.isIn(transferFormat, TransferFormat, \"transferFormat\");\r\n                        this.logger.log(LogLevel.Debug, \"Starting connection with transfer format '\" + TransferFormat[transferFormat] + \"'.\");\r\n                        if (this.connectionState !== \"Disconnected\" /* Disconnected */) {\r\n                            return [2 /*return*/, Promise.reject(new Error(\"Cannot start an HttpConnection that is not in the 'Disconnected' state.\"))];\r\n                        }\r\n                        this.connectionState = \"Connecting\" /* Connecting */;\r\n                        this.startInternalPromise = this.startInternal(transferFormat);\r\n                        return [4 /*yield*/, this.startInternalPromise];\r\n                    case 1:\r\n                        _a.sent();\r\n                        if (!(this.connectionState === \"Disconnecting\" /* Disconnecting */)) return [3 /*break*/, 3];\r\n                        message = \"Failed to start the HttpConnection before stop() was called.\";\r\n                        this.logger.log(LogLevel.Error, message);\r\n                        // We cannot await stopPromise inside startInternal since stopInternal awaits the startInternalPromise.\r\n                        return [4 /*yield*/, this.stopPromise];\r\n                    case 2:\r\n                        // We cannot await stopPromise inside startInternal since stopInternal awaits the startInternalPromise.\r\n                        _a.sent();\r\n                        return [2 /*return*/, Promise.reject(new Error(message))];\r\n                    case 3:\r\n                        if (this.connectionState !== \"Connected\" /* Connected */) {\r\n                            message = \"HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!\";\r\n                            this.logger.log(LogLevel.Error, message);\r\n                            return [2 /*return*/, Promise.reject(new Error(message))];\r\n                        }\r\n                        _a.label = 4;\r\n                    case 4:\r\n                        this.connectionStarted = true;\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    HttpConnection.prototype.send = function (data) {\r\n        if (this.connectionState !== \"Connected\" /* Connected */) {\r\n            return Promise.reject(new Error(\"Cannot send data if the connection is not in the 'Connected' State.\"));\r\n        }\r\n        if (!this.sendQueue) {\r\n            this.sendQueue = new TransportSendQueue(this.transport);\r\n        }\r\n        // Transport will not be null if state is connected\r\n        return this.sendQueue.send(data);\r\n    };\r\n    HttpConnection.prototype.stop = function (error) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (this.connectionState === \"Disconnected\" /* Disconnected */) {\r\n                            this.logger.log(LogLevel.Debug, \"Call to HttpConnection.stop(\" + error + \") ignored because the connection is already in the disconnected state.\");\r\n                            return [2 /*return*/, Promise.resolve()];\r\n                        }\r\n                        if (this.connectionState === \"Disconnecting\" /* Disconnecting */) {\r\n                            this.logger.log(LogLevel.Debug, \"Call to HttpConnection.stop(\" + error + \") ignored because the connection is already in the disconnecting state.\");\r\n                            return [2 /*return*/, this.stopPromise];\r\n                        }\r\n                        this.connectionState = \"Disconnecting\" /* Disconnecting */;\r\n                        this.stopPromise = new Promise(function (resolve) {\r\n                            // Don't complete stop() until stopConnection() completes.\r\n                            _this.stopPromiseResolver = resolve;\r\n                        });\r\n                        // stopInternal should never throw so just observe it.\r\n                        return [4 /*yield*/, this.stopInternal(error)];\r\n                    case 1:\r\n                        // stopInternal should never throw so just observe it.\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.stopPromise];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    HttpConnection.prototype.stopInternal = function (error) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var e_1, e_2;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        // Set error as soon as possible otherwise there is a race between\r\n                        // the transport closing and providing an error and the error from a close message\r\n                        // We would prefer the close message error.\r\n                        this.stopError = error;\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, , 4]);\r\n                        return [4 /*yield*/, this.startInternalPromise];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        e_1 = _a.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 4:\r\n                        if (!this.transport) return [3 /*break*/, 9];\r\n                        _a.label = 5;\r\n                    case 5:\r\n                        _a.trys.push([5, 7, , 8]);\r\n                        return [4 /*yield*/, this.transport.stop()];\r\n                    case 6:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 8];\r\n                    case 7:\r\n                        e_2 = _a.sent();\r\n                        this.logger.log(LogLevel.Error, \"HttpConnection.transport.stop() threw error '\" + e_2 + \"'.\");\r\n                        this.stopConnection();\r\n                        return [3 /*break*/, 8];\r\n                    case 8:\r\n                        this.transport = undefined;\r\n                        return [3 /*break*/, 10];\r\n                    case 9:\r\n                        this.logger.log(LogLevel.Debug, \"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.\");\r\n                        this.stopConnection();\r\n                        _a.label = 10;\r\n                    case 10: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    HttpConnection.prototype.startInternal = function (transferFormat) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var url, negotiateResponse, redirects, _loop_1, this_1, e_3;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        url = this.baseUrl;\r\n                        this.accessTokenFactory = this.options.accessTokenFactory;\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 12, , 13]);\r\n                        if (!this.options.skipNegotiation) return [3 /*break*/, 5];\r\n                        if (!(this.options.transport === HttpTransportType.WebSockets)) return [3 /*break*/, 3];\r\n                        // No need to add a connection ID in this case\r\n                        this.transport = this.constructTransport(HttpTransportType.WebSockets);\r\n                        // We should just call connect directly in this case.\r\n                        // No fallback or negotiate in this case.\r\n                        return [4 /*yield*/, this.startTransport(url, transferFormat)];\r\n                    case 2:\r\n                        // We should just call connect directly in this case.\r\n                        // No fallback or negotiate in this case.\r\n                        _a.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3: throw new Error(\"Negotiation can only be skipped when using the WebSocket transport directly.\");\r\n                    case 4: return [3 /*break*/, 11];\r\n                    case 5:\r\n                        negotiateResponse = null;\r\n                        redirects = 0;\r\n                        _loop_1 = function () {\r\n                            var accessToken_1;\r\n                            return __generator(this, function (_a) {\r\n                                switch (_a.label) {\r\n                                    case 0: return [4 /*yield*/, this_1.getNegotiationResponse(url)];\r\n                                    case 1:\r\n                                        negotiateResponse = _a.sent();\r\n                                        // the user tries to stop the connection when it is being started\r\n                                        if (this_1.connectionState === \"Disconnecting\" /* Disconnecting */ || this_1.connectionState === \"Disconnected\" /* Disconnected */) {\r\n                                            throw new Error(\"The connection was stopped during negotiation.\");\r\n                                        }\r\n                                        if (negotiateResponse.error) {\r\n                                            throw new Error(negotiateResponse.error);\r\n                                        }\r\n                                        if (negotiateResponse.ProtocolVersion) {\r\n                                            throw new Error(\"Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.\");\r\n                                        }\r\n                                        if (negotiateResponse.url) {\r\n                                            url = negotiateResponse.url;\r\n                                        }\r\n                                        if (negotiateResponse.accessToken) {\r\n                                            accessToken_1 = negotiateResponse.accessToken;\r\n                                            this_1.accessTokenFactory = function () { return accessToken_1; };\r\n                                        }\r\n                                        redirects++;\r\n                                        return [2 /*return*/];\r\n                                }\r\n                            });\r\n                        };\r\n                        this_1 = this;\r\n                        _a.label = 6;\r\n                    case 6: return [5 /*yield**/, _loop_1()];\r\n                    case 7:\r\n                        _a.sent();\r\n                        _a.label = 8;\r\n                    case 8:\r\n                        if (negotiateResponse.url && redirects < MAX_REDIRECTS) return [3 /*break*/, 6];\r\n                        _a.label = 9;\r\n                    case 9:\r\n                        if (redirects === MAX_REDIRECTS && negotiateResponse.url) {\r\n                            throw new Error(\"Negotiate redirection limit exceeded.\");\r\n                        }\r\n                        return [4 /*yield*/, this.createTransport(url, this.options.transport, negotiateResponse, transferFormat)];\r\n                    case 10:\r\n                        _a.sent();\r\n                        _a.label = 11;\r\n                    case 11:\r\n                        if (this.transport instanceof LongPollingTransport) {\r\n                            this.features.inherentKeepAlive = true;\r\n                        }\r\n                        if (this.connectionState === \"Connecting\" /* Connecting */) {\r\n                            // Ensure the connection transitions to the connected state prior to completing this.startInternalPromise.\r\n                            // start() will handle the case when stop was called and startInternal exits still in the disconnecting state.\r\n                            this.logger.log(LogLevel.Debug, \"The HttpConnection connected successfully.\");\r\n                            this.connectionState = \"Connected\" /* Connected */;\r\n                        }\r\n                        return [3 /*break*/, 13];\r\n                    case 12:\r\n                        e_3 = _a.sent();\r\n                        this.logger.log(LogLevel.Error, \"Failed to start the connection: \" + e_3);\r\n                        this.connectionState = \"Disconnected\" /* Disconnected */;\r\n                        this.transport = undefined;\r\n                        return [2 /*return*/, Promise.reject(e_3)];\r\n                    case 13: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    HttpConnection.prototype.getNegotiationResponse = function (url) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var headers, token, _a, name, value, negotiateUrl, response, negotiateResponse, e_4;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        headers = {};\r\n                        if (!this.accessTokenFactory) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.accessTokenFactory()];\r\n                    case 1:\r\n                        token = _b.sent();\r\n                        if (token) {\r\n                            headers[\"Authorization\"] = \"Bearer \" + token;\r\n                        }\r\n                        _b.label = 2;\r\n                    case 2:\r\n                        _a = getUserAgentHeader(), name = _a[0], value = _a[1];\r\n                        headers[name] = value;\r\n                        negotiateUrl = this.resolveNegotiateUrl(url);\r\n                        this.logger.log(LogLevel.Debug, \"Sending negotiation request: \" + negotiateUrl + \".\");\r\n                        _b.label = 3;\r\n                    case 3:\r\n                        _b.trys.push([3, 5, , 6]);\r\n                        return [4 /*yield*/, this.httpClient.post(negotiateUrl, {\r\n                                content: \"\",\r\n                                headers: __assign({}, headers, this.options.headers),\r\n                                withCredentials: this.options.withCredentials,\r\n                            })];\r\n                    case 4:\r\n                        response = _b.sent();\r\n                        if (response.statusCode !== 200) {\r\n                            return [2 /*return*/, Promise.reject(new Error(\"Unexpected status code returned from negotiate '\" + response.statusCode + \"'\"))];\r\n                        }\r\n                        negotiateResponse = JSON.parse(response.content);\r\n                        if (!negotiateResponse.negotiateVersion || negotiateResponse.negotiateVersion < 1) {\r\n                            // Negotiate version 0 doesn't use connectionToken\r\n                            // So we set it equal to connectionId so all our logic can use connectionToken without being aware of the negotiate version\r\n                            negotiateResponse.connectionToken = negotiateResponse.connectionId;\r\n                        }\r\n                        return [2 /*return*/, negotiateResponse];\r\n                    case 5:\r\n                        e_4 = _b.sent();\r\n                        this.logger.log(LogLevel.Error, \"Failed to complete negotiation with the server: \" + e_4);\r\n                        return [2 /*return*/, Promise.reject(e_4)];\r\n                    case 6: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    HttpConnection.prototype.createConnectUrl = function (url, connectionToken) {\r\n        if (!connectionToken) {\r\n            return url;\r\n        }\r\n        return url + (url.indexOf(\"?\") === -1 ? \"?\" : \"&\") + (\"id=\" + connectionToken);\r\n    };\r\n    HttpConnection.prototype.createTransport = function (url, requestedTransport, negotiateResponse, requestedTransferFormat) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var connectUrl, transportExceptions, transports, negotiate, _i, transports_1, endpoint, transportOrError, ex_1, ex_2, message;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        connectUrl = this.createConnectUrl(url, negotiateResponse.connectionToken);\r\n                        if (!this.isITransport(requestedTransport)) return [3 /*break*/, 2];\r\n                        this.logger.log(LogLevel.Debug, \"Connection was provided an instance of ITransport, using that directly.\");\r\n                        this.transport = requestedTransport;\r\n                        return [4 /*yield*/, this.startTransport(connectUrl, requestedTransferFormat)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        this.connectionId = negotiateResponse.connectionId;\r\n                        return [2 /*return*/];\r\n                    case 2:\r\n                        transportExceptions = [];\r\n                        transports = negotiateResponse.availableTransports || [];\r\n                        negotiate = negotiateResponse;\r\n                        _i = 0, transports_1 = transports;\r\n                        _a.label = 3;\r\n                    case 3:\r\n                        if (!(_i < transports_1.length)) return [3 /*break*/, 13];\r\n                        endpoint = transports_1[_i];\r\n                        transportOrError = this.resolveTransportOrError(endpoint, requestedTransport, requestedTransferFormat);\r\n                        if (!(transportOrError instanceof Error)) return [3 /*break*/, 4];\r\n                        // Store the error and continue, we don't want to cause a re-negotiate in these cases\r\n                        transportExceptions.push(endpoint.transport + \" failed: \" + transportOrError);\r\n                        return [3 /*break*/, 12];\r\n                    case 4:\r\n                        if (!this.isITransport(transportOrError)) return [3 /*break*/, 12];\r\n                        this.transport = transportOrError;\r\n                        if (!!negotiate) return [3 /*break*/, 9];\r\n                        _a.label = 5;\r\n                    case 5:\r\n                        _a.trys.push([5, 7, , 8]);\r\n                        return [4 /*yield*/, this.getNegotiationResponse(url)];\r\n                    case 6:\r\n                        negotiate = _a.sent();\r\n                        return [3 /*break*/, 8];\r\n                    case 7:\r\n                        ex_1 = _a.sent();\r\n                        return [2 /*return*/, Promise.reject(ex_1)];\r\n                    case 8:\r\n                        connectUrl = this.createConnectUrl(url, negotiate.connectionToken);\r\n                        _a.label = 9;\r\n                    case 9:\r\n                        _a.trys.push([9, 11, , 12]);\r\n                        return [4 /*yield*/, this.startTransport(connectUrl, requestedTransferFormat)];\r\n                    case 10:\r\n                        _a.sent();\r\n                        this.connectionId = negotiate.connectionId;\r\n                        return [2 /*return*/];\r\n                    case 11:\r\n                        ex_2 = _a.sent();\r\n                        this.logger.log(LogLevel.Error, \"Failed to start the transport '\" + endpoint.transport + \"': \" + ex_2);\r\n                        negotiate = undefined;\r\n                        transportExceptions.push(endpoint.transport + \" failed: \" + ex_2);\r\n                        if (this.connectionState !== \"Connecting\" /* Connecting */) {\r\n                            message = \"Failed to select transport before stop() was called.\";\r\n                            this.logger.log(LogLevel.Debug, message);\r\n                            return [2 /*return*/, Promise.reject(new Error(message))];\r\n                        }\r\n                        return [3 /*break*/, 12];\r\n                    case 12:\r\n                        _i++;\r\n                        return [3 /*break*/, 3];\r\n                    case 13:\r\n                        if (transportExceptions.length > 0) {\r\n                            return [2 /*return*/, Promise.reject(new Error(\"Unable to connect to the server with any of the available transports. \" + transportExceptions.join(\" \")))];\r\n                        }\r\n                        return [2 /*return*/, Promise.reject(new Error(\"None of the transports supported by the client are supported by the server.\"))];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    HttpConnection.prototype.constructTransport = function (transport) {\r\n        switch (transport) {\r\n            case HttpTransportType.WebSockets:\r\n                if (!this.options.WebSocket) {\r\n                    throw new Error(\"'WebSocket' is not supported in your environment.\");\r\n                }\r\n                return new WebSocketTransport(this.httpClient, this.accessTokenFactory, this.logger, this.options.logMessageContent || false, this.options.WebSocket, this.options.headers || {});\r\n            case HttpTransportType.ServerSentEvents:\r\n                if (!this.options.EventSource) {\r\n                    throw new Error(\"'EventSource' is not supported in your environment.\");\r\n                }\r\n                return new ServerSentEventsTransport(this.httpClient, this.accessTokenFactory, this.logger, this.options.logMessageContent || false, this.options.EventSource, this.options.withCredentials, this.options.headers || {});\r\n            case HttpTransportType.LongPolling:\r\n                return new LongPollingTransport(this.httpClient, this.accessTokenFactory, this.logger, this.options.logMessageContent || false, this.options.withCredentials, this.options.headers || {});\r\n            default:\r\n                throw new Error(\"Unknown transport: \" + transport + \".\");\r\n        }\r\n    };\r\n    HttpConnection.prototype.startTransport = function (url, transferFormat) {\r\n        var _this = this;\r\n        this.transport.onreceive = this.onreceive;\r\n        this.transport.onclose = function (e) { return _this.stopConnection(e); };\r\n        return this.transport.connect(url, transferFormat);\r\n    };\r\n    HttpConnection.prototype.resolveTransportOrError = function (endpoint, requestedTransport, requestedTransferFormat) {\r\n        var transport = HttpTransportType[endpoint.transport];\r\n        if (transport === null || transport === undefined) {\r\n            this.logger.log(LogLevel.Debug, \"Skipping transport '\" + endpoint.transport + \"' because it is not supported by this client.\");\r\n            return new Error(\"Skipping transport '\" + endpoint.transport + \"' because it is not supported by this client.\");\r\n        }\r\n        else {\r\n            if (transportMatches(requestedTransport, transport)) {\r\n                var transferFormats = endpoint.transferFormats.map(function (s) { return TransferFormat[s]; });\r\n                if (transferFormats.indexOf(requestedTransferFormat) >= 0) {\r\n                    if ((transport === HttpTransportType.WebSockets && !this.options.WebSocket) ||\r\n                        (transport === HttpTransportType.ServerSentEvents && !this.options.EventSource)) {\r\n                        this.logger.log(LogLevel.Debug, \"Skipping transport '\" + HttpTransportType[transport] + \"' because it is not supported in your environment.'\");\r\n                        return new Error(\"'\" + HttpTransportType[transport] + \"' is not supported in your environment.\");\r\n                    }\r\n                    else {\r\n                        this.logger.log(LogLevel.Debug, \"Selecting transport '\" + HttpTransportType[transport] + \"'.\");\r\n                        try {\r\n                            return this.constructTransport(transport);\r\n                        }\r\n                        catch (ex) {\r\n                            return ex;\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    this.logger.log(LogLevel.Debug, \"Skipping transport '\" + HttpTransportType[transport] + \"' because it does not support the requested transfer format '\" + TransferFormat[requestedTransferFormat] + \"'.\");\r\n                    return new Error(\"'\" + HttpTransportType[transport] + \"' does not support \" + TransferFormat[requestedTransferFormat] + \".\");\r\n                }\r\n            }\r\n            else {\r\n                this.logger.log(LogLevel.Debug, \"Skipping transport '\" + HttpTransportType[transport] + \"' because it was disabled by the client.\");\r\n                return new Error(\"'\" + HttpTransportType[transport] + \"' is disabled by the client.\");\r\n            }\r\n        }\r\n    };\r\n    HttpConnection.prototype.isITransport = function (transport) {\r\n        return transport && typeof (transport) === \"object\" && \"connect\" in transport;\r\n    };\r\n    HttpConnection.prototype.stopConnection = function (error) {\r\n        var _this = this;\r\n        this.logger.log(LogLevel.Debug, \"HttpConnection.stopConnection(\" + error + \") called while in state \" + this.connectionState + \".\");\r\n        this.transport = undefined;\r\n        // If we have a stopError, it takes precedence over the error from the transport\r\n        error = this.stopError || error;\r\n        this.stopError = undefined;\r\n        if (this.connectionState === \"Disconnected\" /* Disconnected */) {\r\n            this.logger.log(LogLevel.Debug, \"Call to HttpConnection.stopConnection(\" + error + \") was ignored because the connection is already in the disconnected state.\");\r\n            return;\r\n        }\r\n        if (this.connectionState === \"Connecting\" /* Connecting */) {\r\n            this.logger.log(LogLevel.Warning, \"Call to HttpConnection.stopConnection(\" + error + \") was ignored because the connection is still in the connecting state.\");\r\n            throw new Error(\"HttpConnection.stopConnection(\" + error + \") was called while the connection is still in the connecting state.\");\r\n        }\r\n        if (this.connectionState === \"Disconnecting\" /* Disconnecting */) {\r\n            // A call to stop() induced this call to stopConnection and needs to be completed.\r\n            // Any stop() awaiters will be scheduled to continue after the onclose callback fires.\r\n            this.stopPromiseResolver();\r\n        }\r\n        if (error) {\r\n            this.logger.log(LogLevel.Error, \"Connection disconnected with error '\" + error + \"'.\");\r\n        }\r\n        else {\r\n            this.logger.log(LogLevel.Information, \"Connection disconnected.\");\r\n        }\r\n        if (this.sendQueue) {\r\n            this.sendQueue.stop().catch(function (e) {\r\n                _this.logger.log(LogLevel.Error, \"TransportSendQueue.stop() threw error '\" + e + \"'.\");\r\n            });\r\n            this.sendQueue = undefined;\r\n        }\r\n        this.connectionId = undefined;\r\n        this.connectionState = \"Disconnected\" /* Disconnected */;\r\n        if (this.connectionStarted) {\r\n            this.connectionStarted = false;\r\n            try {\r\n                if (this.onclose) {\r\n                    this.onclose(error);\r\n                }\r\n            }\r\n            catch (e) {\r\n                this.logger.log(LogLevel.Error, \"HttpConnection.onclose(\" + error + \") threw error '\" + e + \"'.\");\r\n            }\r\n        }\r\n    };\r\n    HttpConnection.prototype.resolveUrl = function (url) {\r\n        // startsWith is not supported in IE\r\n        if (url.lastIndexOf(\"https://\", 0) === 0 || url.lastIndexOf(\"http://\", 0) === 0) {\r\n            return url;\r\n        }\r\n        if (!Platform.isBrowser || !window.document) {\r\n            throw new Error(\"Cannot resolve '\" + url + \"'.\");\r\n        }\r\n        // Setting the url to the href propery of an anchor tag handles normalization\r\n        // for us. There are 3 main cases.\r\n        // 1. Relative path normalization e.g \"b\" -> \"http://localhost:5000/a/b\"\r\n        // 2. Absolute path normalization e.g \"/a/b\" -> \"http://localhost:5000/a/b\"\r\n        // 3. Networkpath reference normalization e.g \"//localhost:5000/a/b\" -> \"http://localhost:5000/a/b\"\r\n        var aTag = window.document.createElement(\"a\");\r\n        aTag.href = url;\r\n        this.logger.log(LogLevel.Information, \"Normalizing '\" + url + \"' to '\" + aTag.href + \"'.\");\r\n        return aTag.href;\r\n    };\r\n    HttpConnection.prototype.resolveNegotiateUrl = function (url) {\r\n        var index = url.indexOf(\"?\");\r\n        var negotiateUrl = url.substring(0, index === -1 ? url.length : index);\r\n        if (negotiateUrl[negotiateUrl.length - 1] !== \"/\") {\r\n            negotiateUrl += \"/\";\r\n        }\r\n        negotiateUrl += \"negotiate\";\r\n        negotiateUrl += index === -1 ? \"\" : url.substring(index);\r\n        if (negotiateUrl.indexOf(\"negotiateVersion\") === -1) {\r\n            negotiateUrl += index === -1 ? \"?\" : \"&\";\r\n            negotiateUrl += \"negotiateVersion=\" + this.negotiateVersion;\r\n        }\r\n        return negotiateUrl;\r\n    };\r\n    return HttpConnection;\r\n}());\r\nexport { HttpConnection };\r\nfunction transportMatches(requestedTransport, actualTransport) {\r\n    return !requestedTransport || ((actualTransport & requestedTransport) !== 0);\r\n}\r\n/** @private */\r\nvar TransportSendQueue = /** @class */ (function () {\r\n    function TransportSendQueue(transport) {\r\n        this.transport = transport;\r\n        this.buffer = [];\r\n        this.executing = true;\r\n        this.sendBufferedData = new PromiseSource();\r\n        this.transportResult = new PromiseSource();\r\n        this.sendLoopPromise = this.sendLoop();\r\n    }\r\n    TransportSendQueue.prototype.send = function (data) {\r\n        this.bufferData(data);\r\n        if (!this.transportResult) {\r\n            this.transportResult = new PromiseSource();\r\n        }\r\n        return this.transportResult.promise;\r\n    };\r\n    TransportSendQueue.prototype.stop = function () {\r\n        this.executing = false;\r\n        this.sendBufferedData.resolve();\r\n        return this.sendLoopPromise;\r\n    };\r\n    TransportSendQueue.prototype.bufferData = function (data) {\r\n        if (this.buffer.length && typeof (this.buffer[0]) !== typeof (data)) {\r\n            throw new Error(\"Expected data to be of type \" + typeof (this.buffer) + \" but was of type \" + typeof (data));\r\n        }\r\n        this.buffer.push(data);\r\n        this.sendBufferedData.resolve();\r\n    };\r\n    TransportSendQueue.prototype.sendLoop = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var transportResult, data, error_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!true) return [3 /*break*/, 6];\r\n                        return [4 /*yield*/, this.sendBufferedData.promise];\r\n                    case 1:\r\n                        _a.sent();\r\n                        if (!this.executing) {\r\n                            if (this.transportResult) {\r\n                                this.transportResult.reject(\"Connection stopped.\");\r\n                            }\r\n                            return [3 /*break*/, 6];\r\n                        }\r\n                        this.sendBufferedData = new PromiseSource();\r\n                        transportResult = this.transportResult;\r\n                        this.transportResult = undefined;\r\n                        data = typeof (this.buffer[0]) === \"string\" ?\r\n                            this.buffer.join(\"\") :\r\n                            TransportSendQueue.concatBuffers(this.buffer);\r\n                        this.buffer.length = 0;\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        _a.trys.push([2, 4, , 5]);\r\n                        return [4 /*yield*/, this.transport.send(data)];\r\n                    case 3:\r\n                        _a.sent();\r\n                        transportResult.resolve();\r\n                        return [3 /*break*/, 5];\r\n                    case 4:\r\n                        error_1 = _a.sent();\r\n                        transportResult.reject(error_1);\r\n                        return [3 /*break*/, 5];\r\n                    case 5: return [3 /*break*/, 0];\r\n                    case 6: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    TransportSendQueue.concatBuffers = function (arrayBuffers) {\r\n        var totalLength = arrayBuffers.map(function (b) { return b.byteLength; }).reduce(function (a, b) { return a + b; });\r\n        var result = new Uint8Array(totalLength);\r\n        var offset = 0;\r\n        for (var _i = 0, arrayBuffers_1 = arrayBuffers; _i < arrayBuffers_1.length; _i++) {\r\n            var item = arrayBuffers_1[_i];\r\n            result.set(new Uint8Array(item), offset);\r\n            offset += item.byteLength;\r\n        }\r\n        return result.buffer;\r\n    };\r\n    return TransportSendQueue;\r\n}());\r\nexport { TransportSendQueue };\r\nvar PromiseSource = /** @class */ (function () {\r\n    function PromiseSource() {\r\n        var _this = this;\r\n        this.promise = new Promise(function (resolve, reject) {\r\n            var _a;\r\n            return _a = [resolve, reject], _this.resolver = _a[0], _this.rejecter = _a[1], _a;\r\n        });\r\n    }\r\n    PromiseSource.prototype.resolve = function () {\r\n        this.resolver();\r\n    };\r\n    PromiseSource.prototype.reject = function (reason) {\r\n        this.rejecter(reason);\r\n    };\r\n    return PromiseSource;\r\n}());\r\n//# sourceMappingURL=HttpConnection.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nimport { MessageType } from \"./IHubProtocol\";\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { TransferFormat } from \"./ITransport\";\r\nimport { NullLogger } from \"./Loggers\";\r\nimport { TextMessageFormat } from \"./TextMessageFormat\";\r\nvar JSON_HUB_PROTOCOL_NAME = \"json\";\r\n/** Implements the JSON Hub Protocol. */\r\nvar JsonHubProtocol = /** @class */ (function () {\r\n    function JsonHubProtocol() {\r\n        /** @inheritDoc */\r\n        this.name = JSON_HUB_PROTOCOL_NAME;\r\n        /** @inheritDoc */\r\n        this.version = 1;\r\n        /** @inheritDoc */\r\n        this.transferFormat = TransferFormat.Text;\r\n    }\r\n    /** Creates an array of {@link @microsoft/signalr.HubMessage} objects from the specified serialized representation.\r\n     *\r\n     * @param {string} input A string containing the serialized representation.\r\n     * @param {ILogger} logger A logger that will be used to log messages that occur during parsing.\r\n     */\r\n    JsonHubProtocol.prototype.parseMessages = function (input, logger) {\r\n        // The interface does allow \"ArrayBuffer\" to be passed in, but this implementation does not. So let's throw a useful error.\r\n        if (typeof input !== \"string\") {\r\n            throw new Error(\"Invalid input for JSON hub protocol. Expected a string.\");\r\n        }\r\n        if (!input) {\r\n            return [];\r\n        }\r\n        if (logger === null) {\r\n            logger = NullLogger.instance;\r\n        }\r\n        // Parse the messages\r\n        var messages = TextMessageFormat.parse(input);\r\n        var hubMessages = [];\r\n        for (var _i = 0, messages_1 = messages; _i < messages_1.length; _i++) {\r\n            var message = messages_1[_i];\r\n            var parsedMessage = JSON.parse(message);\r\n            if (typeof parsedMessage.type !== \"number\") {\r\n                throw new Error(\"Invalid payload.\");\r\n            }\r\n            switch (parsedMessage.type) {\r\n                case MessageType.Invocation:\r\n                    this.isInvocationMessage(parsedMessage);\r\n                    break;\r\n                case MessageType.StreamItem:\r\n                    this.isStreamItemMessage(parsedMessage);\r\n                    break;\r\n                case MessageType.Completion:\r\n                    this.isCompletionMessage(parsedMessage);\r\n                    break;\r\n                case MessageType.Ping:\r\n                    // Single value, no need to validate\r\n                    break;\r\n                case MessageType.Close:\r\n                    // All optional values, no need to validate\r\n                    break;\r\n                default:\r\n                    // Future protocol changes can add message types, old clients can ignore them\r\n                    logger.log(LogLevel.Information, \"Unknown message type '\" + parsedMessage.type + \"' ignored.\");\r\n                    continue;\r\n            }\r\n            hubMessages.push(parsedMessage);\r\n        }\r\n        return hubMessages;\r\n    };\r\n    /** Writes the specified {@link @microsoft/signalr.HubMessage} to a string and returns it.\r\n     *\r\n     * @param {HubMessage} message The message to write.\r\n     * @returns {string} A string containing the serialized representation of the message.\r\n     */\r\n    JsonHubProtocol.prototype.writeMessage = function (message) {\r\n        return TextMessageFormat.write(JSON.stringify(message));\r\n    };\r\n    JsonHubProtocol.prototype.isInvocationMessage = function (message) {\r\n        this.assertNotEmptyString(message.target, \"Invalid payload for Invocation message.\");\r\n        if (message.invocationId !== undefined) {\r\n            this.assertNotEmptyString(message.invocationId, \"Invalid payload for Invocation message.\");\r\n        }\r\n    };\r\n    JsonHubProtocol.prototype.isStreamItemMessage = function (message) {\r\n        this.assertNotEmptyString(message.invocationId, \"Invalid payload for StreamItem message.\");\r\n        if (message.item === undefined) {\r\n            throw new Error(\"Invalid payload for StreamItem message.\");\r\n        }\r\n    };\r\n    JsonHubProtocol.prototype.isCompletionMessage = function (message) {\r\n        if (message.result && message.error) {\r\n            throw new Error(\"Invalid payload for Completion message.\");\r\n        }\r\n        if (!message.result && message.error) {\r\n            this.assertNotEmptyString(message.error, \"Invalid payload for Completion message.\");\r\n        }\r\n        this.assertNotEmptyString(message.invocationId, \"Invalid payload for Completion message.\");\r\n    };\r\n    JsonHubProtocol.prototype.assertNotEmptyString = function (value, errorMessage) {\r\n        if (typeof value !== \"string\" || value === \"\") {\r\n            throw new Error(errorMessage);\r\n        }\r\n    };\r\n    return JsonHubProtocol;\r\n}());\r\nexport { JsonHubProtocol };\r\n//# sourceMappingURL=JsonHubProtocol.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\n// Rough polyfill of https://developer.mozilla.org/en-US/docs/Web/API/AbortController\r\n// We don't actually ever use the API being polyfilled, we always use the polyfill because\r\n// it's a very new API right now.\r\n// Not exported from index.\r\n/** @private */\r\nvar AbortController = /** @class */ (function () {\r\n    function AbortController() {\r\n        this.isAborted = false;\r\n        this.onabort = null;\r\n    }\r\n    AbortController.prototype.abort = function () {\r\n        if (!this.isAborted) {\r\n            this.isAborted = true;\r\n            if (this.onabort) {\r\n                this.onabort();\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(AbortController.prototype, \"signal\", {\r\n        get: function () {\r\n            return this;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AbortController.prototype, \"aborted\", {\r\n        get: function () {\r\n            return this.isAborted;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return AbortController;\r\n}());\r\nexport { AbortController };\r\n//# sourceMappingURL=AbortController.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nexport { AbortError, HttpError, TimeoutError } from \"./Errors\";\r\nexport { HttpClient, HttpResponse } from \"./HttpClient\";\r\nexport { DefaultHttpClient } from \"./DefaultHttpClient\";\r\nexport { HubConnection, HubConnectionState } from \"./HubConnection\";\r\nexport { HubConnectionBuilder } from \"./HubConnectionBuilder\";\r\nexport { MessageType } from \"./IHubProtocol\";\r\nexport { LogLevel } from \"./ILogger\";\r\nexport { HttpTransportType, TransferFormat } from \"./ITransport\";\r\nexport { NullLogger } from \"./Loggers\";\r\nexport { JsonHubProtocol } from \"./JsonHubProtocol\";\r\nexport { Subject } from \"./Subject\";\r\nexport { VERSION } from \"./Utils\";\r\n//# sourceMappingURL=index.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { TransferFormat } from \"./ITransport\";\r\nimport { Arg, getDataDetail, getUserAgentHeader, Platform } from \"./Utils\";\r\n/** @private */\r\nvar WebSocketTransport = /** @class */ (function () {\r\n    function WebSocketTransport(httpClient, accessTokenFactory, logger, logMessageContent, webSocketConstructor, headers) {\r\n        this.logger = logger;\r\n        this.accessTokenFactory = accessTokenFactory;\r\n        this.logMessageContent = logMessageContent;\r\n        this.webSocketConstructor = webSocketConstructor;\r\n        this.httpClient = httpClient;\r\n        this.onreceive = null;\r\n        this.onclose = null;\r\n        this.headers = headers;\r\n    }\r\n    WebSocketTransport.prototype.connect = function (url, transferFormat) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var token;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        Arg.isRequired(url, \"url\");\r\n                        Arg.isRequired(transferFormat, \"transferFormat\");\r\n                        Arg.isIn(transferFormat, TransferFormat, \"transferFormat\");\r\n                        this.logger.log(LogLevel.Trace, \"(WebSockets transport) Connecting.\");\r\n                        if (!this.accessTokenFactory) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.accessTokenFactory()];\r\n                    case 1:\r\n                        token = _a.sent();\r\n                        if (token) {\r\n                            url += (url.indexOf(\"?\") < 0 ? \"?\" : \"&\") + (\"access_token=\" + encodeURIComponent(token));\r\n                        }\r\n                        _a.label = 2;\r\n                    case 2: return [2 /*return*/, new Promise(function (resolve, reject) {\r\n                            url = url.replace(/^http/, \"ws\");\r\n                            var webSocket;\r\n                            var cookies = _this.httpClient.getCookieString(url);\r\n                            var opened = false;\r\n                            if (Platform.isNode) {\r\n                                var headers = {};\r\n                                var _a = getUserAgentHeader(), name_1 = _a[0], value = _a[1];\r\n                                headers[name_1] = value;\r\n                                if (cookies) {\r\n                                    headers[\"Cookie\"] = \"\" + cookies;\r\n                                }\r\n                                // Only pass headers when in non-browser environments\r\n                                webSocket = new _this.webSocketConstructor(url, undefined, {\r\n                                    headers: __assign({}, headers, _this.headers),\r\n                                });\r\n                            }\r\n                            if (!webSocket) {\r\n                                // Chrome is not happy with passing 'undefined' as protocol\r\n                                webSocket = new _this.webSocketConstructor(url);\r\n                            }\r\n                            if (transferFormat === TransferFormat.Binary) {\r\n                                webSocket.binaryType = \"arraybuffer\";\r\n                            }\r\n                            // tslint:disable-next-line:variable-name\r\n                            webSocket.onopen = function (_event) {\r\n                                _this.logger.log(LogLevel.Information, \"WebSocket connected to \" + url + \".\");\r\n                                _this.webSocket = webSocket;\r\n                                opened = true;\r\n                                resolve();\r\n                            };\r\n                            webSocket.onerror = function (event) {\r\n                                var error = null;\r\n                                // ErrorEvent is a browser only type we need to check if the type exists before using it\r\n                                if (typeof ErrorEvent !== \"undefined\" && event instanceof ErrorEvent) {\r\n                                    error = event.error;\r\n                                }\r\n                                else {\r\n                                    error = new Error(\"There was an error with the transport.\");\r\n                                }\r\n                                reject(error);\r\n                            };\r\n                            webSocket.onmessage = function (message) {\r\n                                _this.logger.log(LogLevel.Trace, \"(WebSockets transport) data received. \" + getDataDetail(message.data, _this.logMessageContent) + \".\");\r\n                                if (_this.onreceive) {\r\n                                    try {\r\n                                        _this.onreceive(message.data);\r\n                                    }\r\n                                    catch (error) {\r\n                                        _this.close(error);\r\n                                        return;\r\n                                    }\r\n                                }\r\n                            };\r\n                            webSocket.onclose = function (event) {\r\n                                // Don't call close handler if connection was never established\r\n                                // We'll reject the connect call instead\r\n                                if (opened) {\r\n                                    _this.close(event);\r\n                                }\r\n                                else {\r\n                                    var error = null;\r\n                                    // ErrorEvent is a browser only type we need to check if the type exists before using it\r\n                                    if (typeof ErrorEvent !== \"undefined\" && event instanceof ErrorEvent) {\r\n                                        error = event.error;\r\n                                    }\r\n                                    else {\r\n                                        error = new Error(\"There was an error with the transport.\");\r\n                                    }\r\n                                    reject(error);\r\n                                }\r\n                            };\r\n                        })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    WebSocketTransport.prototype.send = function (data) {\r\n        if (this.webSocket && this.webSocket.readyState === this.webSocketConstructor.OPEN) {\r\n            this.logger.log(LogLevel.Trace, \"(WebSockets transport) sending data. \" + getDataDetail(data, this.logMessageContent) + \".\");\r\n            this.webSocket.send(data);\r\n            return Promise.resolve();\r\n        }\r\n        return Promise.reject(\"WebSocket is not in the OPEN state\");\r\n    };\r\n    WebSocketTransport.prototype.stop = function () {\r\n        if (this.webSocket) {\r\n            // Manually invoke onclose callback inline so we know the HttpConnection was closed properly before returning\r\n            // This also solves an issue where websocket.onclose could take 18+ seconds to trigger during network disconnects\r\n            this.close(undefined);\r\n        }\r\n        return Promise.resolve();\r\n    };\r\n    WebSocketTransport.prototype.close = function (event) {\r\n        // webSocket will be null if the transport did not start successfully\r\n        if (this.webSocket) {\r\n            // Clear websocket handlers because we are considering the socket closed now\r\n            this.webSocket.onclose = function () { };\r\n            this.webSocket.onmessage = function () { };\r\n            this.webSocket.onerror = function () { };\r\n            this.webSocket.close();\r\n            this.webSocket = undefined;\r\n        }\r\n        this.logger.log(LogLevel.Trace, \"(WebSockets transport) socket closed.\");\r\n        if (this.onclose) {\r\n            if (this.isCloseEvent(event) && (event.wasClean === false || event.code !== 1000)) {\r\n                this.onclose(new Error(\"WebSocket closed with status code: \" + event.code + \" (\" + event.reason + \").\"));\r\n            }\r\n            else if (event instanceof Error) {\r\n                this.onclose(event);\r\n            }\r\n            else {\r\n                this.onclose();\r\n            }\r\n        }\r\n    };\r\n    WebSocketTransport.prototype.isCloseEvent = function (event) {\r\n        return event && typeof event.wasClean === \"boolean\" && typeof event.code === \"number\";\r\n    };\r\n    return WebSocketTransport;\r\n}());\r\nexport { WebSocketTransport };\r\n//# sourceMappingURL=WebSocketTransport.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/** Error thrown when an HTTP request fails. */\r\nvar HttpError = /** @class */ (function (_super) {\r\n    __extends(HttpError, _super);\r\n    /** Constructs a new instance of {@link @microsoft/signalr.HttpError}.\r\n     *\r\n     * @param {string} errorMessage A descriptive error message.\r\n     * @param {number} statusCode The HTTP status code represented by this error.\r\n     */\r\n    function HttpError(errorMessage, statusCode) {\r\n        var _newTarget = this.constructor;\r\n        var _this = this;\r\n        var trueProto = _newTarget.prototype;\r\n        _this = _super.call(this, errorMessage) || this;\r\n        _this.statusCode = statusCode;\r\n        // Workaround issue in Typescript compiler\r\n        // https://github.com/Microsoft/TypeScript/issues/13965#issuecomment-278570200\r\n        _this.__proto__ = trueProto;\r\n        return _this;\r\n    }\r\n    return HttpError;\r\n}(Error));\r\nexport { HttpError };\r\n/** Error thrown when a timeout elapses. */\r\nvar TimeoutError = /** @class */ (function (_super) {\r\n    __extends(TimeoutError, _super);\r\n    /** Constructs a new instance of {@link @microsoft/signalr.TimeoutError}.\r\n     *\r\n     * @param {string} errorMessage A descriptive error message.\r\n     */\r\n    function TimeoutError(errorMessage) {\r\n        var _newTarget = this.constructor;\r\n        if (errorMessage === void 0) { errorMessage = \"A timeout occurred.\"; }\r\n        var _this = this;\r\n        var trueProto = _newTarget.prototype;\r\n        _this = _super.call(this, errorMessage) || this;\r\n        // Workaround issue in Typescript compiler\r\n        // https://github.com/Microsoft/TypeScript/issues/13965#issuecomment-278570200\r\n        _this.__proto__ = trueProto;\r\n        return _this;\r\n    }\r\n    return TimeoutError;\r\n}(Error));\r\nexport { TimeoutError };\r\n/** Error thrown when an action is aborted. */\r\nvar AbortError = /** @class */ (function (_super) {\r\n    __extends(AbortError, _super);\r\n    /** Constructs a new instance of {@link AbortError}.\r\n     *\r\n     * @param {string} errorMessage A descriptive error message.\r\n     */\r\n    function AbortError(errorMessage) {\r\n        var _newTarget = this.constructor;\r\n        if (errorMessage === void 0) { errorMessage = \"An abort occurred.\"; }\r\n        var _this = this;\r\n        var trueProto = _newTarget.prototype;\r\n        _this = _super.call(this, errorMessage) || this;\r\n        // Workaround issue in Typescript compiler\r\n        // https://github.com/Microsoft/TypeScript/issues/13965#issuecomment-278570200\r\n        _this.__proto__ = trueProto;\r\n        return _this;\r\n    }\r\n    return AbortError;\r\n}(Error));\r\nexport { AbortError };\r\n//# sourceMappingURL=Errors.js.map","export default \"<div class=\\\"row\\\">\\n\\t<nz-badge [nzCount]=\\\"notificationCount\\\">\\n\\t\\t<button\\n\\t\\t\\tnz-button\\n\\t\\t\\tnz-popover\\n\\t\\t\\tnzPopoverTitle=\\\"Thông Báo\\\"\\n\\t\\t\\t[(nzPopoverVisible)]=\\\"isNotificationVisible\\\"\\n\\t\\t\\t(nzPopoverVisibleChange)=\\\"changeShowNotificationListStatus($event)\\\"\\n\\t\\t\\tnzPopoverTrigger=\\\"click\\\"\\n\\t\\t\\t[nzPopoverContent]=\\\"contentTemplate\\\"\\n\\t\\t>\\n\\t\\t\\t<i style=\\\"margin: auto;\\\" [style.font-size.px]=\\\"fontSize\\\" nz-icon nzType=\\\"bell\\\" nzTheme=\\\"outline\\\"></i>\\n\\t\\t</button>\\n\\t</nz-badge>\\n</div>\\n<ng-template #contentTemplate>\\n\\t<!-- <nz-empty [nzNotFoundContent]=\\\"contentTpl\\\" style=\\\"margin-top: 50px;\\\" *ngIf=\\\"{{notificationList.length}}>0; else haveData\\\">\\n\\t\\t<ng-template #contentTpl><span> Không Có Đơn Hàng Nào</span></ng-template>\\n\\t</nz-empty>\\n\\t<ng-template #haveData> -->\\n\\t<div #vari class=\\\"notification-list\\\">\\n\\t\\t<div class=\\\"row\\\" *ngFor=\\\"let notification of notificationList \\\">\\n\\t\\t\\t<a style=\\\"text-decoration: none;\\\">\\n\\t\\t\\t\\t<div class=\\\"row\\\">\\n\\t\\t\\t\\t\\t<div class=\\\"col l-2\\\">\\n\\t\\t\\t\\t\\t\\t<img\\n\\t\\t\\t\\t\\t\\t\\tstyle=\\\"max-height: 80%;max-width: 100%;\\\"\\n\\t\\t\\t\\t\\t\\t\\tsrc=\\\"{{host}}/{{notification.imagePath}}\\\"\\n\\t\\t\\t\\t\\t\\t\\talt=\\\"{{notification.notificationName}}\\\"\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t<div class=\\\"col l-10\\\">\\n\\t\\t\\t\\t\\t\\t<div class=\\\"row\\\">\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col l-12\\\">{{notification.notificationName}}</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t<div class=\\\"row\\\">\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col l-12\\\">{{notification.content}}</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</a>\\n\\t\\t</div>\\n\\t\\t<nz-skeleton *ngIf=\\\"isLoading\\\" [nzLoading]=\\\"isLoading\\\" [nzActive]=\\\"true\\\"></nz-skeleton>\\n\\t\\t<div\\n\\t\\t\\tinfiniteScroll\\n\\t\\t\\t[infiniteScrollDistance]=\\\"1\\\"\\n\\t\\t\\t[infiniteScrollThrottle]=\\\"50\\\"\\n\\t\\t\\t[infiniteScrollContainer]=\\\"vari\\\"\\n\\t\\t\\t[fromRoot]=\\\"true\\\"\\n\\t\\t\\t(scrolled)=\\\"onScroll()\\\"\\n\\t\\t></div>\\n\\t</div>\\n\\t<!-- </ng-template> -->\\n</ng-template>\\n\";","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { AbortController } from \"./AbortController\";\r\nimport { HttpError, TimeoutError } from \"./Errors\";\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { TransferFormat } from \"./ITransport\";\r\nimport { Arg, getDataDetail, getUserAgentHeader, sendMessage } from \"./Utils\";\r\n// Not exported from 'index', this type is internal.\r\n/** @private */\r\nvar LongPollingTransport = /** @class */ (function () {\r\n    function LongPollingTransport(httpClient, accessTokenFactory, logger, logMessageContent, withCredentials, headers) {\r\n        this.httpClient = httpClient;\r\n        this.accessTokenFactory = accessTokenFactory;\r\n        this.logger = logger;\r\n        this.pollAbort = new AbortController();\r\n        this.logMessageContent = logMessageContent;\r\n        this.withCredentials = withCredentials;\r\n        this.headers = headers;\r\n        this.running = false;\r\n        this.onreceive = null;\r\n        this.onclose = null;\r\n    }\r\n    Object.defineProperty(LongPollingTransport.prototype, \"pollAborted\", {\r\n        // This is an internal type, not exported from 'index' so this is really just internal.\r\n        get: function () {\r\n            return this.pollAbort.aborted;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    LongPollingTransport.prototype.connect = function (url, transferFormat) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, _b, name, value, headers, pollOptions, token, pollUrl, response;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        Arg.isRequired(url, \"url\");\r\n                        Arg.isRequired(transferFormat, \"transferFormat\");\r\n                        Arg.isIn(transferFormat, TransferFormat, \"transferFormat\");\r\n                        this.url = url;\r\n                        this.logger.log(LogLevel.Trace, \"(LongPolling transport) Connecting.\");\r\n                        // Allow binary format on Node and Browsers that support binary content (indicated by the presence of responseType property)\r\n                        if (transferFormat === TransferFormat.Binary &&\r\n                            (typeof XMLHttpRequest !== \"undefined\" && typeof new XMLHttpRequest().responseType !== \"string\")) {\r\n                            throw new Error(\"Binary protocols over XmlHttpRequest not implementing advanced features are not supported.\");\r\n                        }\r\n                        _b = getUserAgentHeader(), name = _b[0], value = _b[1];\r\n                        headers = __assign((_a = {}, _a[name] = value, _a), this.headers);\r\n                        pollOptions = {\r\n                            abortSignal: this.pollAbort.signal,\r\n                            headers: headers,\r\n                            timeout: 100000,\r\n                            withCredentials: this.withCredentials,\r\n                        };\r\n                        if (transferFormat === TransferFormat.Binary) {\r\n                            pollOptions.responseType = \"arraybuffer\";\r\n                        }\r\n                        return [4 /*yield*/, this.getAccessToken()];\r\n                    case 1:\r\n                        token = _c.sent();\r\n                        this.updateHeaderToken(pollOptions, token);\r\n                        pollUrl = url + \"&_=\" + Date.now();\r\n                        this.logger.log(LogLevel.Trace, \"(LongPolling transport) polling: \" + pollUrl + \".\");\r\n                        return [4 /*yield*/, this.httpClient.get(pollUrl, pollOptions)];\r\n                    case 2:\r\n                        response = _c.sent();\r\n                        if (response.statusCode !== 200) {\r\n                            this.logger.log(LogLevel.Error, \"(LongPolling transport) Unexpected response code: \" + response.statusCode + \".\");\r\n                            // Mark running as false so that the poll immediately ends and runs the close logic\r\n                            this.closeError = new HttpError(response.statusText || \"\", response.statusCode);\r\n                            this.running = false;\r\n                        }\r\n                        else {\r\n                            this.running = true;\r\n                        }\r\n                        this.receiving = this.poll(this.url, pollOptions);\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    LongPollingTransport.prototype.getAccessToken = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this.accessTokenFactory) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.accessTokenFactory()];\r\n                    case 1: return [2 /*return*/, _a.sent()];\r\n                    case 2: return [2 /*return*/, null];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    LongPollingTransport.prototype.updateHeaderToken = function (request, token) {\r\n        if (!request.headers) {\r\n            request.headers = {};\r\n        }\r\n        if (token) {\r\n            // tslint:disable-next-line:no-string-literal\r\n            request.headers[\"Authorization\"] = \"Bearer \" + token;\r\n            return;\r\n        }\r\n        // tslint:disable-next-line:no-string-literal\r\n        if (request.headers[\"Authorization\"]) {\r\n            // tslint:disable-next-line:no-string-literal\r\n            delete request.headers[\"Authorization\"];\r\n        }\r\n    };\r\n    LongPollingTransport.prototype.poll = function (url, pollOptions) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var token, pollUrl, response, e_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, , 8, 9]);\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        if (!this.running) return [3 /*break*/, 7];\r\n                        return [4 /*yield*/, this.getAccessToken()];\r\n                    case 2:\r\n                        token = _a.sent();\r\n                        this.updateHeaderToken(pollOptions, token);\r\n                        _a.label = 3;\r\n                    case 3:\r\n                        _a.trys.push([3, 5, , 6]);\r\n                        pollUrl = url + \"&_=\" + Date.now();\r\n                        this.logger.log(LogLevel.Trace, \"(LongPolling transport) polling: \" + pollUrl + \".\");\r\n                        return [4 /*yield*/, this.httpClient.get(pollUrl, pollOptions)];\r\n                    case 4:\r\n                        response = _a.sent();\r\n                        if (response.statusCode === 204) {\r\n                            this.logger.log(LogLevel.Information, \"(LongPolling transport) Poll terminated by server.\");\r\n                            this.running = false;\r\n                        }\r\n                        else if (response.statusCode !== 200) {\r\n                            this.logger.log(LogLevel.Error, \"(LongPolling transport) Unexpected response code: \" + response.statusCode + \".\");\r\n                            // Unexpected status code\r\n                            this.closeError = new HttpError(response.statusText || \"\", response.statusCode);\r\n                            this.running = false;\r\n                        }\r\n                        else {\r\n                            // Process the response\r\n                            if (response.content) {\r\n                                this.logger.log(LogLevel.Trace, \"(LongPolling transport) data received. \" + getDataDetail(response.content, this.logMessageContent) + \".\");\r\n                                if (this.onreceive) {\r\n                                    this.onreceive(response.content);\r\n                                }\r\n                            }\r\n                            else {\r\n                                // This is another way timeout manifest.\r\n                                this.logger.log(LogLevel.Trace, \"(LongPolling transport) Poll timed out, reissuing.\");\r\n                            }\r\n                        }\r\n                        return [3 /*break*/, 6];\r\n                    case 5:\r\n                        e_1 = _a.sent();\r\n                        if (!this.running) {\r\n                            // Log but disregard errors that occur after stopping\r\n                            this.logger.log(LogLevel.Trace, \"(LongPolling transport) Poll errored after shutdown: \" + e_1.message);\r\n                        }\r\n                        else {\r\n                            if (e_1 instanceof TimeoutError) {\r\n                                // Ignore timeouts and reissue the poll.\r\n                                this.logger.log(LogLevel.Trace, \"(LongPolling transport) Poll timed out, reissuing.\");\r\n                            }\r\n                            else {\r\n                                // Close the connection with the error as the result.\r\n                                this.closeError = e_1;\r\n                                this.running = false;\r\n                            }\r\n                        }\r\n                        return [3 /*break*/, 6];\r\n                    case 6: return [3 /*break*/, 1];\r\n                    case 7: return [3 /*break*/, 9];\r\n                    case 8:\r\n                        this.logger.log(LogLevel.Trace, \"(LongPolling transport) Polling complete.\");\r\n                        // We will reach here with pollAborted==false when the server returned a response causing the transport to stop.\r\n                        // If pollAborted==true then client initiated the stop and the stop method will raise the close event after DELETE is sent.\r\n                        if (!this.pollAborted) {\r\n                            this.raiseOnClose();\r\n                        }\r\n                        return [7 /*endfinally*/];\r\n                    case 9: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    LongPollingTransport.prototype.send = function (data) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                if (!this.running) {\r\n                    return [2 /*return*/, Promise.reject(new Error(\"Cannot send until the transport is connected\"))];\r\n                }\r\n                return [2 /*return*/, sendMessage(this.logger, \"LongPolling\", this.httpClient, this.url, this.accessTokenFactory, data, this.logMessageContent, this.withCredentials, this.headers)];\r\n            });\r\n        });\r\n    };\r\n    LongPollingTransport.prototype.stop = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var headers, _a, name_1, value, deleteOptions, token;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        this.logger.log(LogLevel.Trace, \"(LongPolling transport) Stopping polling.\");\r\n                        // Tell receiving loop to stop, abort any current request, and then wait for it to finish\r\n                        this.running = false;\r\n                        this.pollAbort.abort();\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        _b.trys.push([1, , 5, 6]);\r\n                        return [4 /*yield*/, this.receiving];\r\n                    case 2:\r\n                        _b.sent();\r\n                        // Send DELETE to clean up long polling on the server\r\n                        this.logger.log(LogLevel.Trace, \"(LongPolling transport) sending DELETE request to \" + this.url + \".\");\r\n                        headers = {};\r\n                        _a = getUserAgentHeader(), name_1 = _a[0], value = _a[1];\r\n                        headers[name_1] = value;\r\n                        deleteOptions = {\r\n                            headers: __assign({}, headers, this.headers),\r\n                            withCredentials: this.withCredentials,\r\n                        };\r\n                        return [4 /*yield*/, this.getAccessToken()];\r\n                    case 3:\r\n                        token = _b.sent();\r\n                        this.updateHeaderToken(deleteOptions, token);\r\n                        return [4 /*yield*/, this.httpClient.delete(this.url, deleteOptions)];\r\n                    case 4:\r\n                        _b.sent();\r\n                        this.logger.log(LogLevel.Trace, \"(LongPolling transport) DELETE request sent.\");\r\n                        return [3 /*break*/, 6];\r\n                    case 5:\r\n                        this.logger.log(LogLevel.Trace, \"(LongPolling transport) Stop finished.\");\r\n                        // Raise close event here instead of in polling\r\n                        // It needs to happen after the DELETE request is sent\r\n                        this.raiseOnClose();\r\n                        return [7 /*endfinally*/];\r\n                    case 6: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    LongPollingTransport.prototype.raiseOnClose = function () {\r\n        if (this.onclose) {\r\n            var logMessage = \"(LongPolling transport) Firing onclose event.\";\r\n            if (this.closeError) {\r\n                logMessage += \" Error: \" + this.closeError;\r\n            }\r\n            this.logger.log(LogLevel.Trace, logMessage);\r\n            this.onclose(this.closeError);\r\n        }\r\n    };\r\n    return LongPollingTransport;\r\n}());\r\nexport { LongPollingTransport };\r\n//# sourceMappingURL=LongPollingTransport.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { AbortError, HttpError, TimeoutError } from \"./Errors\";\r\nimport { HttpClient, HttpResponse } from \"./HttpClient\";\r\nimport { LogLevel } from \"./ILogger\";\r\nvar XhrHttpClient = /** @class */ (function (_super) {\r\n    __extends(XhrHttpClient, _super);\r\n    function XhrHttpClient(logger) {\r\n        var _this = _super.call(this) || this;\r\n        _this.logger = logger;\r\n        return _this;\r\n    }\r\n    /** @inheritDoc */\r\n    XhrHttpClient.prototype.send = function (request) {\r\n        var _this = this;\r\n        // Check that abort was not signaled before calling send\r\n        if (request.abortSignal && request.abortSignal.aborted) {\r\n            return Promise.reject(new AbortError());\r\n        }\r\n        if (!request.method) {\r\n            return Promise.reject(new Error(\"No method defined.\"));\r\n        }\r\n        if (!request.url) {\r\n            return Promise.reject(new Error(\"No url defined.\"));\r\n        }\r\n        return new Promise(function (resolve, reject) {\r\n            var xhr = new XMLHttpRequest();\r\n            xhr.open(request.method, request.url, true);\r\n            xhr.withCredentials = request.withCredentials === undefined ? true : request.withCredentials;\r\n            xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n            // Explicitly setting the Content-Type header for React Native on Android platform.\r\n            xhr.setRequestHeader(\"Content-Type\", \"text/plain;charset=UTF-8\");\r\n            var headers = request.headers;\r\n            if (headers) {\r\n                Object.keys(headers)\r\n                    .forEach(function (header) {\r\n                    xhr.setRequestHeader(header, headers[header]);\r\n                });\r\n            }\r\n            if (request.responseType) {\r\n                xhr.responseType = request.responseType;\r\n            }\r\n            if (request.abortSignal) {\r\n                request.abortSignal.onabort = function () {\r\n                    xhr.abort();\r\n                    reject(new AbortError());\r\n                };\r\n            }\r\n            if (request.timeout) {\r\n                xhr.timeout = request.timeout;\r\n            }\r\n            xhr.onload = function () {\r\n                if (request.abortSignal) {\r\n                    request.abortSignal.onabort = null;\r\n                }\r\n                if (xhr.status >= 200 && xhr.status < 300) {\r\n                    resolve(new HttpResponse(xhr.status, xhr.statusText, xhr.response || xhr.responseText));\r\n                }\r\n                else {\r\n                    reject(new HttpError(xhr.statusText, xhr.status));\r\n                }\r\n            };\r\n            xhr.onerror = function () {\r\n                _this.logger.log(LogLevel.Warning, \"Error from HTTP request. \" + xhr.status + \": \" + xhr.statusText + \".\");\r\n                reject(new HttpError(xhr.statusText, xhr.status));\r\n            };\r\n            xhr.ontimeout = function () {\r\n                _this.logger.log(LogLevel.Warning, \"Timeout from HTTP request.\");\r\n                reject(new TimeoutError());\r\n            };\r\n            xhr.send(request.content || \"\");\r\n        });\r\n    };\r\n    return XhrHttpClient;\r\n}(HttpClient));\r\nexport { XhrHttpClient };\r\n//# sourceMappingURL=XhrHttpClient.js.map","import {environment} from 'src/environments/environment';\r\nimport {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\r\nimport {NotificationResponse} from 'src/app/core/models/common/notification/response/notification-response.viewmodel';\r\n\r\n@Component({\r\n\tselector: 'app-notification',\r\n\ttemplateUrl: './notification.component.html',\r\n\tstyleUrls: ['./notification.component.less']\r\n})\r\nexport class NotificationComponent implements OnInit {\r\n\t@Input() fontSize: number=24;\r\n\t@Input() notificationCount: number;\r\n\t@Input() notificationList: Array<NotificationResponse>=[];\r\n\t@Input() isLoading: boolean=true;\r\n\t@Output() isNotificationListOpen = new EventEmitter<boolean>();\r\n\t@Output() startOfIndex = new EventEmitter<number>();\r\n\tisNotificationVisible: boolean = false;\r\n\tstartIndexScroll: number = 1;\r\n\thost: string = environment.apiUrl;\r\n\r\n\tconstructor() {\r\n\t\tthis.notificationCount = 0;\r\n\t}\r\n\tngOnInit(): void {}\r\n\tonScroll() {\r\n\t\tthis.startOfIndex.emit((this.startIndexScroll = this.startIndexScroll + 1));\r\n\t}\r\n\tchangeShowNotificationListStatus(value: boolean): void {\r\n\t\tthis.startIndexScroll = 1;\r\n\t\tthis.startOfIndex.emit(this.startIndexScroll);\r\n\t\tthis.isNotificationListOpen.emit(value);\r\n\t}\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\n// These values are designed to match the ASP.NET Log Levels since that's the pattern we're emulating here.\r\n/** Indicates the severity of a log message.\r\n *\r\n * Log Levels are ordered in increasing severity. So `Debug` is more severe than `Trace`, etc.\r\n */\r\nexport var LogLevel;\r\n(function (LogLevel) {\r\n    /** Log level for very low severity diagnostic messages. */\r\n    LogLevel[LogLevel[\"Trace\"] = 0] = \"Trace\";\r\n    /** Log level for low severity diagnostic messages. */\r\n    LogLevel[LogLevel[\"Debug\"] = 1] = \"Debug\";\r\n    /** Log level for informational diagnostic messages. */\r\n    LogLevel[LogLevel[\"Information\"] = 2] = \"Information\";\r\n    /** Log level for diagnostic messages that indicate a non-fatal problem. */\r\n    LogLevel[LogLevel[\"Warning\"] = 3] = \"Warning\";\r\n    /** Log level for diagnostic messages that indicate a failure in the current operation. */\r\n    LogLevel[LogLevel[\"Error\"] = 4] = \"Error\";\r\n    /** Log level for diagnostic messages that indicate a failure that will terminate the entire application. */\r\n    LogLevel[LogLevel[\"Critical\"] = 5] = \"Critical\";\r\n    /** The highest possible log level. Used when configuring logging to indicate that no log messages should be emitted. */\r\n    LogLevel[LogLevel[\"None\"] = 6] = \"None\";\r\n})(LogLevel || (LogLevel = {}));\r\n//# sourceMappingURL=ILogger.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\n// Not exported from index\r\n/** @private */\r\nvar TextMessageFormat = /** @class */ (function () {\r\n    function TextMessageFormat() {\r\n    }\r\n    TextMessageFormat.write = function (output) {\r\n        return \"\" + output + TextMessageFormat.RecordSeparator;\r\n    };\r\n    TextMessageFormat.parse = function (input) {\r\n        if (input[input.length - 1] !== TextMessageFormat.RecordSeparator) {\r\n            throw new Error(\"Message is incomplete.\");\r\n        }\r\n        var messages = input.split(TextMessageFormat.RecordSeparator);\r\n        messages.pop();\r\n        return messages;\r\n    };\r\n    TextMessageFormat.RecordSeparatorCode = 0x1e;\r\n    TextMessageFormat.RecordSeparator = String.fromCharCode(TextMessageFormat.RecordSeparatorCode);\r\n    return TextMessageFormat;\r\n}());\r\nexport { TextMessageFormat };\r\n//# sourceMappingURL=TextMessageFormat.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\n/** Represents an HTTP response. */\r\nvar HttpResponse = /** @class */ (function () {\r\n    function HttpResponse(statusCode, statusText, content) {\r\n        this.statusCode = statusCode;\r\n        this.statusText = statusText;\r\n        this.content = content;\r\n    }\r\n    return HttpResponse;\r\n}());\r\nexport { HttpResponse };\r\n/** Abstraction over an HTTP client.\r\n *\r\n * This class provides an abstraction over an HTTP client so that a different implementation can be provided on different platforms.\r\n */\r\nvar HttpClient = /** @class */ (function () {\r\n    function HttpClient() {\r\n    }\r\n    HttpClient.prototype.get = function (url, options) {\r\n        return this.send(__assign({}, options, { method: \"GET\", url: url }));\r\n    };\r\n    HttpClient.prototype.post = function (url, options) {\r\n        return this.send(__assign({}, options, { method: \"POST\", url: url }));\r\n    };\r\n    HttpClient.prototype.delete = function (url, options) {\r\n        return this.send(__assign({}, options, { method: \"DELETE\", url: url }));\r\n    };\r\n    /** Gets all cookies that apply to the specified URL.\r\n     *\r\n     * @param url The URL that the cookies are valid for.\r\n     * @returns {string} A string containing all the key-value cookie pairs for the specified URL.\r\n     */\r\n    // @ts-ignore\r\n    HttpClient.prototype.getCookieString = function (url) {\r\n        return \"\";\r\n    };\r\n    return HttpClient;\r\n}());\r\nexport { HttpClient };\r\n//# sourceMappingURL=HttpClient.js.map","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nconst routes: Routes = [];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class NotificationRoutingModule { }\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { AbortError } from \"./Errors\";\r\nimport { FetchHttpClient } from \"./FetchHttpClient\";\r\nimport { HttpClient } from \"./HttpClient\";\r\nimport { Platform } from \"./Utils\";\r\nimport { XhrHttpClient } from \"./XhrHttpClient\";\r\n/** Default implementation of {@link @microsoft/signalr.HttpClient}. */\r\nvar DefaultHttpClient = /** @class */ (function (_super) {\r\n    __extends(DefaultHttpClient, _super);\r\n    /** Creates a new instance of the {@link @microsoft/signalr.DefaultHttpClient}, using the provided {@link @microsoft/signalr.ILogger} to log messages. */\r\n    function DefaultHttpClient(logger) {\r\n        var _this = _super.call(this) || this;\r\n        if (typeof fetch !== \"undefined\" || Platform.isNode) {\r\n            _this.httpClient = new FetchHttpClient(logger);\r\n        }\r\n        else if (typeof XMLHttpRequest !== \"undefined\") {\r\n            _this.httpClient = new XhrHttpClient(logger);\r\n        }\r\n        else {\r\n            throw new Error(\"No usable HttpClient found.\");\r\n        }\r\n        return _this;\r\n    }\r\n    /** @inheritDoc */\r\n    DefaultHttpClient.prototype.send = function (request) {\r\n        // Check that abort was not signaled before calling send\r\n        if (request.abortSignal && request.abortSignal.aborted) {\r\n            return Promise.reject(new AbortError());\r\n        }\r\n        if (!request.method) {\r\n            return Promise.reject(new Error(\"No method defined.\"));\r\n        }\r\n        if (!request.url) {\r\n            return Promise.reject(new Error(\"No url defined.\"));\r\n        }\r\n        return this.httpClient.send(request);\r\n    };\r\n    DefaultHttpClient.prototype.getCookieString = function (url) {\r\n        return this.httpClient.getCookieString(url);\r\n    };\r\n    return DefaultHttpClient;\r\n}(HttpClient));\r\nexport { DefaultHttpClient };\r\n//# sourceMappingURL=DefaultHttpClient.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nimport { TextMessageFormat } from \"./TextMessageFormat\";\r\nimport { isArrayBuffer } from \"./Utils\";\r\n/** @private */\r\nvar HandshakeProtocol = /** @class */ (function () {\r\n    function HandshakeProtocol() {\r\n    }\r\n    // Handshake request is always JSON\r\n    HandshakeProtocol.prototype.writeHandshakeRequest = function (handshakeRequest) {\r\n        return TextMessageFormat.write(JSON.stringify(handshakeRequest));\r\n    };\r\n    HandshakeProtocol.prototype.parseHandshakeResponse = function (data) {\r\n        var responseMessage;\r\n        var messageData;\r\n        var remainingData;\r\n        if (isArrayBuffer(data) || (typeof Buffer !== \"undefined\" && data instanceof Buffer)) {\r\n            // Format is binary but still need to read JSON text from handshake response\r\n            var binaryData = new Uint8Array(data);\r\n            var separatorIndex = binaryData.indexOf(TextMessageFormat.RecordSeparatorCode);\r\n            if (separatorIndex === -1) {\r\n                throw new Error(\"Message is incomplete.\");\r\n            }\r\n            // content before separator is handshake response\r\n            // optional content after is additional messages\r\n            var responseLength = separatorIndex + 1;\r\n            messageData = String.fromCharCode.apply(null, binaryData.slice(0, responseLength));\r\n            remainingData = (binaryData.byteLength > responseLength) ? binaryData.slice(responseLength).buffer : null;\r\n        }\r\n        else {\r\n            var textData = data;\r\n            var separatorIndex = textData.indexOf(TextMessageFormat.RecordSeparator);\r\n            if (separatorIndex === -1) {\r\n                throw new Error(\"Message is incomplete.\");\r\n            }\r\n            // content before separator is handshake response\r\n            // optional content after is additional messages\r\n            var responseLength = separatorIndex + 1;\r\n            messageData = textData.substring(0, responseLength);\r\n            remainingData = (textData.length > responseLength) ? textData.substring(responseLength) : null;\r\n        }\r\n        // At this point we should have just the single handshake message\r\n        var messages = TextMessageFormat.parse(messageData);\r\n        var response = JSON.parse(messages[0]);\r\n        if (response.type) {\r\n            throw new Error(\"Expected a handshake response from the server.\");\r\n        }\r\n        responseMessage = response;\r\n        // multiple messages could have arrived with handshake\r\n        // return additional data to be parsed as usual, or null if all parsed\r\n        return [remainingData, responseMessage];\r\n    };\r\n    return HandshakeProtocol;\r\n}());\r\nexport { HandshakeProtocol };\r\n//# sourceMappingURL=HandshakeProtocol.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { NullLogger } from \"./Loggers\";\r\n// Version token that will be replaced by the prepack command\r\n/** The version of the SignalR client. */\r\nexport var VERSION = \"5.0.4\";\r\n/** @private */\r\nvar Arg = /** @class */ (function () {\r\n    function Arg() {\r\n    }\r\n    Arg.isRequired = function (val, name) {\r\n        if (val === null || val === undefined) {\r\n            throw new Error(\"The '\" + name + \"' argument is required.\");\r\n        }\r\n    };\r\n    Arg.isNotEmpty = function (val, name) {\r\n        if (!val || val.match(/^\\s*$/)) {\r\n            throw new Error(\"The '\" + name + \"' argument should not be empty.\");\r\n        }\r\n    };\r\n    Arg.isIn = function (val, values, name) {\r\n        // TypeScript enums have keys for **both** the name and the value of each enum member on the type itself.\r\n        if (!(val in values)) {\r\n            throw new Error(\"Unknown \" + name + \" value: \" + val + \".\");\r\n        }\r\n    };\r\n    return Arg;\r\n}());\r\nexport { Arg };\r\n/** @private */\r\nvar Platform = /** @class */ (function () {\r\n    function Platform() {\r\n    }\r\n    Object.defineProperty(Platform, \"isBrowser\", {\r\n        get: function () {\r\n            return typeof window === \"object\";\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Platform, \"isWebWorker\", {\r\n        get: function () {\r\n            return typeof self === \"object\" && \"importScripts\" in self;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Platform, \"isNode\", {\r\n        get: function () {\r\n            return !this.isBrowser && !this.isWebWorker;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Platform;\r\n}());\r\nexport { Platform };\r\n/** @private */\r\nexport function getDataDetail(data, includeContent) {\r\n    var detail = \"\";\r\n    if (isArrayBuffer(data)) {\r\n        detail = \"Binary data of length \" + data.byteLength;\r\n        if (includeContent) {\r\n            detail += \". Content: '\" + formatArrayBuffer(data) + \"'\";\r\n        }\r\n    }\r\n    else if (typeof data === \"string\") {\r\n        detail = \"String data of length \" + data.length;\r\n        if (includeContent) {\r\n            detail += \". Content: '\" + data + \"'\";\r\n        }\r\n    }\r\n    return detail;\r\n}\r\n/** @private */\r\nexport function formatArrayBuffer(data) {\r\n    var view = new Uint8Array(data);\r\n    // Uint8Array.map only supports returning another Uint8Array?\r\n    var str = \"\";\r\n    view.forEach(function (num) {\r\n        var pad = num < 16 ? \"0\" : \"\";\r\n        str += \"0x\" + pad + num.toString(16) + \" \";\r\n    });\r\n    // Trim of trailing space.\r\n    return str.substr(0, str.length - 1);\r\n}\r\n// Also in signalr-protocol-msgpack/Utils.ts\r\n/** @private */\r\nexport function isArrayBuffer(val) {\r\n    return val && typeof ArrayBuffer !== \"undefined\" &&\r\n        (val instanceof ArrayBuffer ||\r\n            // Sometimes we get an ArrayBuffer that doesn't satisfy instanceof\r\n            (val.constructor && val.constructor.name === \"ArrayBuffer\"));\r\n}\r\n/** @private */\r\nexport function sendMessage(logger, transportName, httpClient, url, accessTokenFactory, content, logMessageContent, withCredentials, defaultHeaders) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var _a, headers, token, _b, name, value, responseType, response;\r\n        return __generator(this, function (_c) {\r\n            switch (_c.label) {\r\n                case 0:\r\n                    headers = {};\r\n                    if (!accessTokenFactory) return [3 /*break*/, 2];\r\n                    return [4 /*yield*/, accessTokenFactory()];\r\n                case 1:\r\n                    token = _c.sent();\r\n                    if (token) {\r\n                        headers = (_a = {},\r\n                            _a[\"Authorization\"] = \"Bearer \" + token,\r\n                            _a);\r\n                    }\r\n                    _c.label = 2;\r\n                case 2:\r\n                    _b = getUserAgentHeader(), name = _b[0], value = _b[1];\r\n                    headers[name] = value;\r\n                    logger.log(LogLevel.Trace, \"(\" + transportName + \" transport) sending data. \" + getDataDetail(content, logMessageContent) + \".\");\r\n                    responseType = isArrayBuffer(content) ? \"arraybuffer\" : \"text\";\r\n                    return [4 /*yield*/, httpClient.post(url, {\r\n                            content: content,\r\n                            headers: __assign({}, headers, defaultHeaders),\r\n                            responseType: responseType,\r\n                            withCredentials: withCredentials,\r\n                        })];\r\n                case 3:\r\n                    response = _c.sent();\r\n                    logger.log(LogLevel.Trace, \"(\" + transportName + \" transport) request complete. Response status: \" + response.statusCode + \".\");\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\n/** @private */\r\nexport function createLogger(logger) {\r\n    if (logger === undefined) {\r\n        return new ConsoleLogger(LogLevel.Information);\r\n    }\r\n    if (logger === null) {\r\n        return NullLogger.instance;\r\n    }\r\n    if (logger.log) {\r\n        return logger;\r\n    }\r\n    return new ConsoleLogger(logger);\r\n}\r\n/** @private */\r\nvar SubjectSubscription = /** @class */ (function () {\r\n    function SubjectSubscription(subject, observer) {\r\n        this.subject = subject;\r\n        this.observer = observer;\r\n    }\r\n    SubjectSubscription.prototype.dispose = function () {\r\n        var index = this.subject.observers.indexOf(this.observer);\r\n        if (index > -1) {\r\n            this.subject.observers.splice(index, 1);\r\n        }\r\n        if (this.subject.observers.length === 0 && this.subject.cancelCallback) {\r\n            this.subject.cancelCallback().catch(function (_) { });\r\n        }\r\n    };\r\n    return SubjectSubscription;\r\n}());\r\nexport { SubjectSubscription };\r\n/** @private */\r\nvar ConsoleLogger = /** @class */ (function () {\r\n    function ConsoleLogger(minimumLogLevel) {\r\n        this.minimumLogLevel = minimumLogLevel;\r\n        this.outputConsole = console;\r\n    }\r\n    ConsoleLogger.prototype.log = function (logLevel, message) {\r\n        if (logLevel >= this.minimumLogLevel) {\r\n            switch (logLevel) {\r\n                case LogLevel.Critical:\r\n                case LogLevel.Error:\r\n                    this.outputConsole.error(\"[\" + new Date().toISOString() + \"] \" + LogLevel[logLevel] + \": \" + message);\r\n                    break;\r\n                case LogLevel.Warning:\r\n                    this.outputConsole.warn(\"[\" + new Date().toISOString() + \"] \" + LogLevel[logLevel] + \": \" + message);\r\n                    break;\r\n                case LogLevel.Information:\r\n                    this.outputConsole.info(\"[\" + new Date().toISOString() + \"] \" + LogLevel[logLevel] + \": \" + message);\r\n                    break;\r\n                default:\r\n                    // console.debug only goes to attached debuggers in Node, so we use console.log for Trace and Debug\r\n                    this.outputConsole.log(\"[\" + new Date().toISOString() + \"] \" + LogLevel[logLevel] + \": \" + message);\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n    return ConsoleLogger;\r\n}());\r\nexport { ConsoleLogger };\r\n/** @private */\r\nexport function getUserAgentHeader() {\r\n    var userAgentHeaderName = \"X-SignalR-User-Agent\";\r\n    if (Platform.isNode) {\r\n        userAgentHeaderName = \"User-Agent\";\r\n    }\r\n    return [userAgentHeaderName, constructUserAgent(VERSION, getOsName(), getRuntime(), getRuntimeVersion())];\r\n}\r\n/** @private */\r\nexport function constructUserAgent(version, os, runtime, runtimeVersion) {\r\n    // Microsoft SignalR/[Version] ([Detailed Version]; [Operating System]; [Runtime]; [Runtime Version])\r\n    var userAgent = \"Microsoft SignalR/\";\r\n    var majorAndMinor = version.split(\".\");\r\n    userAgent += majorAndMinor[0] + \".\" + majorAndMinor[1];\r\n    userAgent += \" (\" + version + \"; \";\r\n    if (os && os !== \"\") {\r\n        userAgent += os + \"; \";\r\n    }\r\n    else {\r\n        userAgent += \"Unknown OS; \";\r\n    }\r\n    userAgent += \"\" + runtime;\r\n    if (runtimeVersion) {\r\n        userAgent += \"; \" + runtimeVersion;\r\n    }\r\n    else {\r\n        userAgent += \"; Unknown Runtime Version\";\r\n    }\r\n    userAgent += \")\";\r\n    return userAgent;\r\n}\r\nfunction getOsName() {\r\n    if (Platform.isNode) {\r\n        switch (process.platform) {\r\n            case \"win32\":\r\n                return \"Windows NT\";\r\n            case \"darwin\":\r\n                return \"macOS\";\r\n            case \"linux\":\r\n                return \"Linux\";\r\n            default:\r\n                return process.platform;\r\n        }\r\n    }\r\n    else {\r\n        return \"\";\r\n    }\r\n}\r\nfunction getRuntimeVersion() {\r\n    if (Platform.isNode) {\r\n        return process.versions.node;\r\n    }\r\n    return undefined;\r\n}\r\nfunction getRuntime() {\r\n    if (Platform.isNode) {\r\n        return \"NodeJS\";\r\n    }\r\n    else {\r\n        return \"Browser\";\r\n    }\r\n}\r\n//# sourceMappingURL=Utils.js.map","export default \".notification-list {\\n  width: 400px;\\n  height: 500px;\\n  overflow-y: scroll;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vdGlmaWNhdGlvbi5jb21wb25lbnQubGVzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNDLFlBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7QUFDRCIsImZpbGUiOiJub3RpZmljYXRpb24uY29tcG9uZW50Lmxlc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubm90aWZpY2F0aW9uLWxpc3Qge1xuXHR3aWR0aDogNDAwcHg7XG5cdGhlaWdodDogNTAwcHg7XG5cdG92ZXJmbG93LXk6IHNjcm9sbDtcbn1cbiJdfQ== */\";","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\n// 0, 2, 10, 30 second delays before reconnect attempts.\r\nvar DEFAULT_RETRY_DELAYS_IN_MILLISECONDS = [0, 2000, 10000, 30000, null];\r\n/** @private */\r\nvar DefaultReconnectPolicy = /** @class */ (function () {\r\n    function DefaultReconnectPolicy(retryDelays) {\r\n        this.retryDelays = retryDelays !== undefined ? retryDelays.concat([null]) : DEFAULT_RETRY_DELAYS_IN_MILLISECONDS;\r\n    }\r\n    DefaultReconnectPolicy.prototype.nextRetryDelayInMilliseconds = function (retryContext) {\r\n        return this.retryDelays[retryContext.previousRetryCount];\r\n    };\r\n    return DefaultReconnectPolicy;\r\n}());\r\nexport { DefaultReconnectPolicy };\r\n//# sourceMappingURL=DefaultReconnectPolicy.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { HandshakeProtocol } from \"./HandshakeProtocol\";\r\nimport { MessageType } from \"./IHubProtocol\";\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { Subject } from \"./Subject\";\r\nimport { Arg } from \"./Utils\";\r\nvar DEFAULT_TIMEOUT_IN_MS = 30 * 1000;\r\nvar DEFAULT_PING_INTERVAL_IN_MS = 15 * 1000;\r\n/** Describes the current state of the {@link HubConnection} to the server. */\r\nexport var HubConnectionState;\r\n(function (HubConnectionState) {\r\n    /** The hub connection is disconnected. */\r\n    HubConnectionState[\"Disconnected\"] = \"Disconnected\";\r\n    /** The hub connection is connecting. */\r\n    HubConnectionState[\"Connecting\"] = \"Connecting\";\r\n    /** The hub connection is connected. */\r\n    HubConnectionState[\"Connected\"] = \"Connected\";\r\n    /** The hub connection is disconnecting. */\r\n    HubConnectionState[\"Disconnecting\"] = \"Disconnecting\";\r\n    /** The hub connection is reconnecting. */\r\n    HubConnectionState[\"Reconnecting\"] = \"Reconnecting\";\r\n})(HubConnectionState || (HubConnectionState = {}));\r\n/** Represents a connection to a SignalR Hub. */\r\nvar HubConnection = /** @class */ (function () {\r\n    function HubConnection(connection, logger, protocol, reconnectPolicy) {\r\n        var _this = this;\r\n        Arg.isRequired(connection, \"connection\");\r\n        Arg.isRequired(logger, \"logger\");\r\n        Arg.isRequired(protocol, \"protocol\");\r\n        this.serverTimeoutInMilliseconds = DEFAULT_TIMEOUT_IN_MS;\r\n        this.keepAliveIntervalInMilliseconds = DEFAULT_PING_INTERVAL_IN_MS;\r\n        this.logger = logger;\r\n        this.protocol = protocol;\r\n        this.connection = connection;\r\n        this.reconnectPolicy = reconnectPolicy;\r\n        this.handshakeProtocol = new HandshakeProtocol();\r\n        this.connection.onreceive = function (data) { return _this.processIncomingData(data); };\r\n        this.connection.onclose = function (error) { return _this.connectionClosed(error); };\r\n        this.callbacks = {};\r\n        this.methods = {};\r\n        this.closedCallbacks = [];\r\n        this.reconnectingCallbacks = [];\r\n        this.reconnectedCallbacks = [];\r\n        this.invocationId = 0;\r\n        this.receivedHandshakeResponse = false;\r\n        this.connectionState = HubConnectionState.Disconnected;\r\n        this.connectionStarted = false;\r\n        this.cachedPingMessage = this.protocol.writeMessage({ type: MessageType.Ping });\r\n    }\r\n    /** @internal */\r\n    // Using a public static factory method means we can have a private constructor and an _internal_\r\n    // create method that can be used by HubConnectionBuilder. An \"internal\" constructor would just\r\n    // be stripped away and the '.d.ts' file would have no constructor, which is interpreted as a\r\n    // public parameter-less constructor.\r\n    HubConnection.create = function (connection, logger, protocol, reconnectPolicy) {\r\n        return new HubConnection(connection, logger, protocol, reconnectPolicy);\r\n    };\r\n    Object.defineProperty(HubConnection.prototype, \"state\", {\r\n        /** Indicates the state of the {@link HubConnection} to the server. */\r\n        get: function () {\r\n            return this.connectionState;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(HubConnection.prototype, \"connectionId\", {\r\n        /** Represents the connection id of the {@link HubConnection} on the server. The connection id will be null when the connection is either\r\n         *  in the disconnected state or if the negotiation step was skipped.\r\n         */\r\n        get: function () {\r\n            return this.connection ? (this.connection.connectionId || null) : null;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(HubConnection.prototype, \"baseUrl\", {\r\n        /** Indicates the url of the {@link HubConnection} to the server. */\r\n        get: function () {\r\n            return this.connection.baseUrl || \"\";\r\n        },\r\n        /**\r\n         * Sets a new url for the HubConnection. Note that the url can only be changed when the connection is in either the Disconnected or\r\n         * Reconnecting states.\r\n         * @param {string} url The url to connect to.\r\n         */\r\n        set: function (url) {\r\n            if (this.connectionState !== HubConnectionState.Disconnected && this.connectionState !== HubConnectionState.Reconnecting) {\r\n                throw new Error(\"The HubConnection must be in the Disconnected or Reconnecting state to change the url.\");\r\n            }\r\n            if (!url) {\r\n                throw new Error(\"The HubConnection url must be a valid url.\");\r\n            }\r\n            this.connection.baseUrl = url;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /** Starts the connection.\r\n     *\r\n     * @returns {Promise<void>} A Promise that resolves when the connection has been successfully established, or rejects with an error.\r\n     */\r\n    HubConnection.prototype.start = function () {\r\n        this.startPromise = this.startWithStateTransitions();\r\n        return this.startPromise;\r\n    };\r\n    HubConnection.prototype.startWithStateTransitions = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var e_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (this.connectionState !== HubConnectionState.Disconnected) {\r\n                            return [2 /*return*/, Promise.reject(new Error(\"Cannot start a HubConnection that is not in the 'Disconnected' state.\"))];\r\n                        }\r\n                        this.connectionState = HubConnectionState.Connecting;\r\n                        this.logger.log(LogLevel.Debug, \"Starting HubConnection.\");\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, , 4]);\r\n                        return [4 /*yield*/, this.startInternal()];\r\n                    case 2:\r\n                        _a.sent();\r\n                        this.connectionState = HubConnectionState.Connected;\r\n                        this.connectionStarted = true;\r\n                        this.logger.log(LogLevel.Debug, \"HubConnection connected successfully.\");\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        e_1 = _a.sent();\r\n                        this.connectionState = HubConnectionState.Disconnected;\r\n                        this.logger.log(LogLevel.Debug, \"HubConnection failed to start successfully because of error '\" + e_1 + \"'.\");\r\n                        return [2 /*return*/, Promise.reject(e_1)];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    HubConnection.prototype.startInternal = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var handshakePromise, handshakeRequest, e_2;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        this.stopDuringStartError = undefined;\r\n                        this.receivedHandshakeResponse = false;\r\n                        handshakePromise = new Promise(function (resolve, reject) {\r\n                            _this.handshakeResolver = resolve;\r\n                            _this.handshakeRejecter = reject;\r\n                        });\r\n                        return [4 /*yield*/, this.connection.start(this.protocol.transferFormat)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        _a.trys.push([2, 5, , 7]);\r\n                        handshakeRequest = {\r\n                            protocol: this.protocol.name,\r\n                            version: this.protocol.version,\r\n                        };\r\n                        this.logger.log(LogLevel.Debug, \"Sending handshake request.\");\r\n                        return [4 /*yield*/, this.sendMessage(this.handshakeProtocol.writeHandshakeRequest(handshakeRequest))];\r\n                    case 3:\r\n                        _a.sent();\r\n                        this.logger.log(LogLevel.Information, \"Using HubProtocol '\" + this.protocol.name + \"'.\");\r\n                        // defensively cleanup timeout in case we receive a message from the server before we finish start\r\n                        this.cleanupTimeout();\r\n                        this.resetTimeoutPeriod();\r\n                        this.resetKeepAliveInterval();\r\n                        return [4 /*yield*/, handshakePromise];\r\n                    case 4:\r\n                        _a.sent();\r\n                        // It's important to check the stopDuringStartError instead of just relying on the handshakePromise\r\n                        // being rejected on close, because this continuation can run after both the handshake completed successfully\r\n                        // and the connection was closed.\r\n                        if (this.stopDuringStartError) {\r\n                            // It's important to throw instead of returning a rejected promise, because we don't want to allow any state\r\n                            // transitions to occur between now and the calling code observing the exceptions. Returning a rejected promise\r\n                            // will cause the calling continuation to get scheduled to run later.\r\n                            throw this.stopDuringStartError;\r\n                        }\r\n                        return [3 /*break*/, 7];\r\n                    case 5:\r\n                        e_2 = _a.sent();\r\n                        this.logger.log(LogLevel.Debug, \"Hub handshake failed with error '\" + e_2 + \"' during start(). Stopping HubConnection.\");\r\n                        this.cleanupTimeout();\r\n                        this.cleanupPingTimer();\r\n                        // HttpConnection.stop() should not complete until after the onclose callback is invoked.\r\n                        // This will transition the HubConnection to the disconnected state before HttpConnection.stop() completes.\r\n                        return [4 /*yield*/, this.connection.stop(e_2)];\r\n                    case 6:\r\n                        // HttpConnection.stop() should not complete until after the onclose callback is invoked.\r\n                        // This will transition the HubConnection to the disconnected state before HttpConnection.stop() completes.\r\n                        _a.sent();\r\n                        throw e_2;\r\n                    case 7: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /** Stops the connection.\r\n     *\r\n     * @returns {Promise<void>} A Promise that resolves when the connection has been successfully terminated, or rejects with an error.\r\n     */\r\n    HubConnection.prototype.stop = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var startPromise, e_3;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        startPromise = this.startPromise;\r\n                        this.stopPromise = this.stopInternal();\r\n                        return [4 /*yield*/, this.stopPromise];\r\n                    case 1:\r\n                        _a.sent();\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        _a.trys.push([2, 4, , 5]);\r\n                        // Awaiting undefined continues immediately\r\n                        return [4 /*yield*/, startPromise];\r\n                    case 3:\r\n                        // Awaiting undefined continues immediately\r\n                        _a.sent();\r\n                        return [3 /*break*/, 5];\r\n                    case 4:\r\n                        e_3 = _a.sent();\r\n                        return [3 /*break*/, 5];\r\n                    case 5: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    HubConnection.prototype.stopInternal = function (error) {\r\n        if (this.connectionState === HubConnectionState.Disconnected) {\r\n            this.logger.log(LogLevel.Debug, \"Call to HubConnection.stop(\" + error + \") ignored because it is already in the disconnected state.\");\r\n            return Promise.resolve();\r\n        }\r\n        if (this.connectionState === HubConnectionState.Disconnecting) {\r\n            this.logger.log(LogLevel.Debug, \"Call to HttpConnection.stop(\" + error + \") ignored because the connection is already in the disconnecting state.\");\r\n            return this.stopPromise;\r\n        }\r\n        this.connectionState = HubConnectionState.Disconnecting;\r\n        this.logger.log(LogLevel.Debug, \"Stopping HubConnection.\");\r\n        if (this.reconnectDelayHandle) {\r\n            // We're in a reconnect delay which means the underlying connection is currently already stopped.\r\n            // Just clear the handle to stop the reconnect loop (which no one is waiting on thankfully) and\r\n            // fire the onclose callbacks.\r\n            this.logger.log(LogLevel.Debug, \"Connection stopped during reconnect delay. Done reconnecting.\");\r\n            clearTimeout(this.reconnectDelayHandle);\r\n            this.reconnectDelayHandle = undefined;\r\n            this.completeClose();\r\n            return Promise.resolve();\r\n        }\r\n        this.cleanupTimeout();\r\n        this.cleanupPingTimer();\r\n        this.stopDuringStartError = error || new Error(\"The connection was stopped before the hub handshake could complete.\");\r\n        // HttpConnection.stop() should not complete until after either HttpConnection.start() fails\r\n        // or the onclose callback is invoked. The onclose callback will transition the HubConnection\r\n        // to the disconnected state if need be before HttpConnection.stop() completes.\r\n        return this.connection.stop(error);\r\n    };\r\n    /** Invokes a streaming hub method on the server using the specified name and arguments.\r\n     *\r\n     * @typeparam T The type of the items returned by the server.\r\n     * @param {string} methodName The name of the server method to invoke.\r\n     * @param {any[]} args The arguments used to invoke the server method.\r\n     * @returns {IStreamResult<T>} An object that yields results from the server as they are received.\r\n     */\r\n    HubConnection.prototype.stream = function (methodName) {\r\n        var _this = this;\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var _a = this.replaceStreamingParams(args), streams = _a[0], streamIds = _a[1];\r\n        var invocationDescriptor = this.createStreamInvocation(methodName, args, streamIds);\r\n        var promiseQueue;\r\n        var subject = new Subject();\r\n        subject.cancelCallback = function () {\r\n            var cancelInvocation = _this.createCancelInvocation(invocationDescriptor.invocationId);\r\n            delete _this.callbacks[invocationDescriptor.invocationId];\r\n            return promiseQueue.then(function () {\r\n                return _this.sendWithProtocol(cancelInvocation);\r\n            });\r\n        };\r\n        this.callbacks[invocationDescriptor.invocationId] = function (invocationEvent, error) {\r\n            if (error) {\r\n                subject.error(error);\r\n                return;\r\n            }\r\n            else if (invocationEvent) {\r\n                // invocationEvent will not be null when an error is not passed to the callback\r\n                if (invocationEvent.type === MessageType.Completion) {\r\n                    if (invocationEvent.error) {\r\n                        subject.error(new Error(invocationEvent.error));\r\n                    }\r\n                    else {\r\n                        subject.complete();\r\n                    }\r\n                }\r\n                else {\r\n                    subject.next((invocationEvent.item));\r\n                }\r\n            }\r\n        };\r\n        promiseQueue = this.sendWithProtocol(invocationDescriptor)\r\n            .catch(function (e) {\r\n            subject.error(e);\r\n            delete _this.callbacks[invocationDescriptor.invocationId];\r\n        });\r\n        this.launchStreams(streams, promiseQueue);\r\n        return subject;\r\n    };\r\n    HubConnection.prototype.sendMessage = function (message) {\r\n        this.resetKeepAliveInterval();\r\n        return this.connection.send(message);\r\n    };\r\n    /**\r\n     * Sends a js object to the server.\r\n     * @param message The js object to serialize and send.\r\n     */\r\n    HubConnection.prototype.sendWithProtocol = function (message) {\r\n        return this.sendMessage(this.protocol.writeMessage(message));\r\n    };\r\n    /** Invokes a hub method on the server using the specified name and arguments. Does not wait for a response from the receiver.\r\n     *\r\n     * The Promise returned by this method resolves when the client has sent the invocation to the server. The server may still\r\n     * be processing the invocation.\r\n     *\r\n     * @param {string} methodName The name of the server method to invoke.\r\n     * @param {any[]} args The arguments used to invoke the server method.\r\n     * @returns {Promise<void>} A Promise that resolves when the invocation has been successfully sent, or rejects with an error.\r\n     */\r\n    HubConnection.prototype.send = function (methodName) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var _a = this.replaceStreamingParams(args), streams = _a[0], streamIds = _a[1];\r\n        var sendPromise = this.sendWithProtocol(this.createInvocation(methodName, args, true, streamIds));\r\n        this.launchStreams(streams, sendPromise);\r\n        return sendPromise;\r\n    };\r\n    /** Invokes a hub method on the server using the specified name and arguments.\r\n     *\r\n     * The Promise returned by this method resolves when the server indicates it has finished invoking the method. When the promise\r\n     * resolves, the server has finished invoking the method. If the server method returns a result, it is produced as the result of\r\n     * resolving the Promise.\r\n     *\r\n     * @typeparam T The expected return type.\r\n     * @param {string} methodName The name of the server method to invoke.\r\n     * @param {any[]} args The arguments used to invoke the server method.\r\n     * @returns {Promise<T>} A Promise that resolves with the result of the server method (if any), or rejects with an error.\r\n     */\r\n    HubConnection.prototype.invoke = function (methodName) {\r\n        var _this = this;\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var _a = this.replaceStreamingParams(args), streams = _a[0], streamIds = _a[1];\r\n        var invocationDescriptor = this.createInvocation(methodName, args, false, streamIds);\r\n        var p = new Promise(function (resolve, reject) {\r\n            // invocationId will always have a value for a non-blocking invocation\r\n            _this.callbacks[invocationDescriptor.invocationId] = function (invocationEvent, error) {\r\n                if (error) {\r\n                    reject(error);\r\n                    return;\r\n                }\r\n                else if (invocationEvent) {\r\n                    // invocationEvent will not be null when an error is not passed to the callback\r\n                    if (invocationEvent.type === MessageType.Completion) {\r\n                        if (invocationEvent.error) {\r\n                            reject(new Error(invocationEvent.error));\r\n                        }\r\n                        else {\r\n                            resolve(invocationEvent.result);\r\n                        }\r\n                    }\r\n                    else {\r\n                        reject(new Error(\"Unexpected message type: \" + invocationEvent.type));\r\n                    }\r\n                }\r\n            };\r\n            var promiseQueue = _this.sendWithProtocol(invocationDescriptor)\r\n                .catch(function (e) {\r\n                reject(e);\r\n                // invocationId will always have a value for a non-blocking invocation\r\n                delete _this.callbacks[invocationDescriptor.invocationId];\r\n            });\r\n            _this.launchStreams(streams, promiseQueue);\r\n        });\r\n        return p;\r\n    };\r\n    /** Registers a handler that will be invoked when the hub method with the specified method name is invoked.\r\n     *\r\n     * @param {string} methodName The name of the hub method to define.\r\n     * @param {Function} newMethod The handler that will be raised when the hub method is invoked.\r\n     */\r\n    HubConnection.prototype.on = function (methodName, newMethod) {\r\n        if (!methodName || !newMethod) {\r\n            return;\r\n        }\r\n        methodName = methodName.toLowerCase();\r\n        if (!this.methods[methodName]) {\r\n            this.methods[methodName] = [];\r\n        }\r\n        // Preventing adding the same handler multiple times.\r\n        if (this.methods[methodName].indexOf(newMethod) !== -1) {\r\n            return;\r\n        }\r\n        this.methods[methodName].push(newMethod);\r\n    };\r\n    HubConnection.prototype.off = function (methodName, method) {\r\n        if (!methodName) {\r\n            return;\r\n        }\r\n        methodName = methodName.toLowerCase();\r\n        var handlers = this.methods[methodName];\r\n        if (!handlers) {\r\n            return;\r\n        }\r\n        if (method) {\r\n            var removeIdx = handlers.indexOf(method);\r\n            if (removeIdx !== -1) {\r\n                handlers.splice(removeIdx, 1);\r\n                if (handlers.length === 0) {\r\n                    delete this.methods[methodName];\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            delete this.methods[methodName];\r\n        }\r\n    };\r\n    /** Registers a handler that will be invoked when the connection is closed.\r\n     *\r\n     * @param {Function} callback The handler that will be invoked when the connection is closed. Optionally receives a single argument containing the error that caused the connection to close (if any).\r\n     */\r\n    HubConnection.prototype.onclose = function (callback) {\r\n        if (callback) {\r\n            this.closedCallbacks.push(callback);\r\n        }\r\n    };\r\n    /** Registers a handler that will be invoked when the connection starts reconnecting.\r\n     *\r\n     * @param {Function} callback The handler that will be invoked when the connection starts reconnecting. Optionally receives a single argument containing the error that caused the connection to start reconnecting (if any).\r\n     */\r\n    HubConnection.prototype.onreconnecting = function (callback) {\r\n        if (callback) {\r\n            this.reconnectingCallbacks.push(callback);\r\n        }\r\n    };\r\n    /** Registers a handler that will be invoked when the connection successfully reconnects.\r\n     *\r\n     * @param {Function} callback The handler that will be invoked when the connection successfully reconnects.\r\n     */\r\n    HubConnection.prototype.onreconnected = function (callback) {\r\n        if (callback) {\r\n            this.reconnectedCallbacks.push(callback);\r\n        }\r\n    };\r\n    HubConnection.prototype.processIncomingData = function (data) {\r\n        this.cleanupTimeout();\r\n        if (!this.receivedHandshakeResponse) {\r\n            data = this.processHandshakeResponse(data);\r\n            this.receivedHandshakeResponse = true;\r\n        }\r\n        // Data may have all been read when processing handshake response\r\n        if (data) {\r\n            // Parse the messages\r\n            var messages = this.protocol.parseMessages(data, this.logger);\r\n            for (var _i = 0, messages_1 = messages; _i < messages_1.length; _i++) {\r\n                var message = messages_1[_i];\r\n                switch (message.type) {\r\n                    case MessageType.Invocation:\r\n                        this.invokeClientMethod(message);\r\n                        break;\r\n                    case MessageType.StreamItem:\r\n                    case MessageType.Completion:\r\n                        var callback = this.callbacks[message.invocationId];\r\n                        if (callback) {\r\n                            if (message.type === MessageType.Completion) {\r\n                                delete this.callbacks[message.invocationId];\r\n                            }\r\n                            callback(message);\r\n                        }\r\n                        break;\r\n                    case MessageType.Ping:\r\n                        // Don't care about pings\r\n                        break;\r\n                    case MessageType.Close:\r\n                        this.logger.log(LogLevel.Information, \"Close message received from server.\");\r\n                        var error = message.error ? new Error(\"Server returned an error on close: \" + message.error) : undefined;\r\n                        if (message.allowReconnect === true) {\r\n                            // It feels wrong not to await connection.stop() here, but processIncomingData is called as part of an onreceive callback which is not async,\r\n                            // this is already the behavior for serverTimeout(), and HttpConnection.Stop() should catch and log all possible exceptions.\r\n                            // tslint:disable-next-line:no-floating-promises\r\n                            this.connection.stop(error);\r\n                        }\r\n                        else {\r\n                            // We cannot await stopInternal() here, but subsequent calls to stop() will await this if stopInternal() is still ongoing.\r\n                            this.stopPromise = this.stopInternal(error);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        this.logger.log(LogLevel.Warning, \"Invalid message type: \" + message.type + \".\");\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n        this.resetTimeoutPeriod();\r\n    };\r\n    HubConnection.prototype.processHandshakeResponse = function (data) {\r\n        var _a;\r\n        var responseMessage;\r\n        var remainingData;\r\n        try {\r\n            _a = this.handshakeProtocol.parseHandshakeResponse(data), remainingData = _a[0], responseMessage = _a[1];\r\n        }\r\n        catch (e) {\r\n            var message = \"Error parsing handshake response: \" + e;\r\n            this.logger.log(LogLevel.Error, message);\r\n            var error = new Error(message);\r\n            this.handshakeRejecter(error);\r\n            throw error;\r\n        }\r\n        if (responseMessage.error) {\r\n            var message = \"Server returned handshake error: \" + responseMessage.error;\r\n            this.logger.log(LogLevel.Error, message);\r\n            var error = new Error(message);\r\n            this.handshakeRejecter(error);\r\n            throw error;\r\n        }\r\n        else {\r\n            this.logger.log(LogLevel.Debug, \"Server handshake complete.\");\r\n        }\r\n        this.handshakeResolver();\r\n        return remainingData;\r\n    };\r\n    HubConnection.prototype.resetKeepAliveInterval = function () {\r\n        var _this = this;\r\n        if (this.connection.features.inherentKeepAlive) {\r\n            return;\r\n        }\r\n        this.cleanupPingTimer();\r\n        this.pingServerHandle = setTimeout(function () { return __awaiter(_this, void 0, void 0, function () {\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        if (!(this.connectionState === HubConnectionState.Connected)) return [3 /*break*/, 4];\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        _b.trys.push([1, 3, , 4]);\r\n                        return [4 /*yield*/, this.sendMessage(this.cachedPingMessage)];\r\n                    case 2:\r\n                        _b.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        _a = _b.sent();\r\n                        // We don't care about the error. It should be seen elsewhere in the client.\r\n                        // The connection is probably in a bad or closed state now, cleanup the timer so it stops triggering\r\n                        this.cleanupPingTimer();\r\n                        return [3 /*break*/, 4];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        }); }, this.keepAliveIntervalInMilliseconds);\r\n    };\r\n    HubConnection.prototype.resetTimeoutPeriod = function () {\r\n        var _this = this;\r\n        if (!this.connection.features || !this.connection.features.inherentKeepAlive) {\r\n            // Set the timeout timer\r\n            this.timeoutHandle = setTimeout(function () { return _this.serverTimeout(); }, this.serverTimeoutInMilliseconds);\r\n        }\r\n    };\r\n    HubConnection.prototype.serverTimeout = function () {\r\n        // The server hasn't talked to us in a while. It doesn't like us anymore ... :(\r\n        // Terminate the connection, but we don't need to wait on the promise. This could trigger reconnecting.\r\n        // tslint:disable-next-line:no-floating-promises\r\n        this.connection.stop(new Error(\"Server timeout elapsed without receiving a message from the server.\"));\r\n    };\r\n    HubConnection.prototype.invokeClientMethod = function (invocationMessage) {\r\n        var _this = this;\r\n        var methods = this.methods[invocationMessage.target.toLowerCase()];\r\n        if (methods) {\r\n            try {\r\n                methods.forEach(function (m) { return m.apply(_this, invocationMessage.arguments); });\r\n            }\r\n            catch (e) {\r\n                this.logger.log(LogLevel.Error, \"A callback for the method \" + invocationMessage.target.toLowerCase() + \" threw error '\" + e + \"'.\");\r\n            }\r\n            if (invocationMessage.invocationId) {\r\n                // This is not supported in v1. So we return an error to avoid blocking the server waiting for the response.\r\n                var message = \"Server requested a response, which is not supported in this version of the client.\";\r\n                this.logger.log(LogLevel.Error, message);\r\n                // We don't want to wait on the stop itself.\r\n                this.stopPromise = this.stopInternal(new Error(message));\r\n            }\r\n        }\r\n        else {\r\n            this.logger.log(LogLevel.Warning, \"No client method with the name '\" + invocationMessage.target + \"' found.\");\r\n        }\r\n    };\r\n    HubConnection.prototype.connectionClosed = function (error) {\r\n        this.logger.log(LogLevel.Debug, \"HubConnection.connectionClosed(\" + error + \") called while in state \" + this.connectionState + \".\");\r\n        // Triggering this.handshakeRejecter is insufficient because it could already be resolved without the continuation having run yet.\r\n        this.stopDuringStartError = this.stopDuringStartError || error || new Error(\"The underlying connection was closed before the hub handshake could complete.\");\r\n        // If the handshake is in progress, start will be waiting for the handshake promise, so we complete it.\r\n        // If it has already completed, this should just noop.\r\n        if (this.handshakeResolver) {\r\n            this.handshakeResolver();\r\n        }\r\n        this.cancelCallbacksWithError(error || new Error(\"Invocation canceled due to the underlying connection being closed.\"));\r\n        this.cleanupTimeout();\r\n        this.cleanupPingTimer();\r\n        if (this.connectionState === HubConnectionState.Disconnecting) {\r\n            this.completeClose(error);\r\n        }\r\n        else if (this.connectionState === HubConnectionState.Connected && this.reconnectPolicy) {\r\n            // tslint:disable-next-line:no-floating-promises\r\n            this.reconnect(error);\r\n        }\r\n        else if (this.connectionState === HubConnectionState.Connected) {\r\n            this.completeClose(error);\r\n        }\r\n        // If none of the above if conditions were true were called the HubConnection must be in either:\r\n        // 1. The Connecting state in which case the handshakeResolver will complete it and stopDuringStartError will fail it.\r\n        // 2. The Reconnecting state in which case the handshakeResolver will complete it and stopDuringStartError will fail the current reconnect attempt\r\n        //    and potentially continue the reconnect() loop.\r\n        // 3. The Disconnected state in which case we're already done.\r\n    };\r\n    HubConnection.prototype.completeClose = function (error) {\r\n        var _this = this;\r\n        if (this.connectionStarted) {\r\n            this.connectionState = HubConnectionState.Disconnected;\r\n            this.connectionStarted = false;\r\n            try {\r\n                this.closedCallbacks.forEach(function (c) { return c.apply(_this, [error]); });\r\n            }\r\n            catch (e) {\r\n                this.logger.log(LogLevel.Error, \"An onclose callback called with error '\" + error + \"' threw error '\" + e + \"'.\");\r\n            }\r\n        }\r\n    };\r\n    HubConnection.prototype.reconnect = function (error) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var reconnectStartTime, previousReconnectAttempts, retryError, nextRetryDelay, e_4;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        reconnectStartTime = Date.now();\r\n                        previousReconnectAttempts = 0;\r\n                        retryError = error !== undefined ? error : new Error(\"Attempting to reconnect due to a unknown error.\");\r\n                        nextRetryDelay = this.getNextRetryDelay(previousReconnectAttempts++, 0, retryError);\r\n                        if (nextRetryDelay === null) {\r\n                            this.logger.log(LogLevel.Debug, \"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt.\");\r\n                            this.completeClose(error);\r\n                            return [2 /*return*/];\r\n                        }\r\n                        this.connectionState = HubConnectionState.Reconnecting;\r\n                        if (error) {\r\n                            this.logger.log(LogLevel.Information, \"Connection reconnecting because of error '\" + error + \"'.\");\r\n                        }\r\n                        else {\r\n                            this.logger.log(LogLevel.Information, \"Connection reconnecting.\");\r\n                        }\r\n                        if (this.onreconnecting) {\r\n                            try {\r\n                                this.reconnectingCallbacks.forEach(function (c) { return c.apply(_this, [error]); });\r\n                            }\r\n                            catch (e) {\r\n                                this.logger.log(LogLevel.Error, \"An onreconnecting callback called with error '\" + error + \"' threw error '\" + e + \"'.\");\r\n                            }\r\n                            // Exit early if an onreconnecting callback called connection.stop().\r\n                            if (this.connectionState !== HubConnectionState.Reconnecting) {\r\n                                this.logger.log(LogLevel.Debug, \"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.\");\r\n                                return [2 /*return*/];\r\n                            }\r\n                        }\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        if (!(nextRetryDelay !== null)) return [3 /*break*/, 7];\r\n                        this.logger.log(LogLevel.Information, \"Reconnect attempt number \" + previousReconnectAttempts + \" will start in \" + nextRetryDelay + \" ms.\");\r\n                        return [4 /*yield*/, new Promise(function (resolve) {\r\n                                _this.reconnectDelayHandle = setTimeout(resolve, nextRetryDelay);\r\n                            })];\r\n                    case 2:\r\n                        _a.sent();\r\n                        this.reconnectDelayHandle = undefined;\r\n                        if (this.connectionState !== HubConnectionState.Reconnecting) {\r\n                            this.logger.log(LogLevel.Debug, \"Connection left the reconnecting state during reconnect delay. Done reconnecting.\");\r\n                            return [2 /*return*/];\r\n                        }\r\n                        _a.label = 3;\r\n                    case 3:\r\n                        _a.trys.push([3, 5, , 6]);\r\n                        return [4 /*yield*/, this.startInternal()];\r\n                    case 4:\r\n                        _a.sent();\r\n                        this.connectionState = HubConnectionState.Connected;\r\n                        this.logger.log(LogLevel.Information, \"HubConnection reconnected successfully.\");\r\n                        if (this.onreconnected) {\r\n                            try {\r\n                                this.reconnectedCallbacks.forEach(function (c) { return c.apply(_this, [_this.connection.connectionId]); });\r\n                            }\r\n                            catch (e) {\r\n                                this.logger.log(LogLevel.Error, \"An onreconnected callback called with connectionId '\" + this.connection.connectionId + \"; threw error '\" + e + \"'.\");\r\n                            }\r\n                        }\r\n                        return [2 /*return*/];\r\n                    case 5:\r\n                        e_4 = _a.sent();\r\n                        this.logger.log(LogLevel.Information, \"Reconnect attempt failed because of error '\" + e_4 + \"'.\");\r\n                        if (this.connectionState !== HubConnectionState.Reconnecting) {\r\n                            this.logger.log(LogLevel.Debug, \"Connection left the reconnecting state during reconnect attempt. Done reconnecting.\");\r\n                            return [2 /*return*/];\r\n                        }\r\n                        retryError = e_4 instanceof Error ? e_4 : new Error(e_4.toString());\r\n                        nextRetryDelay = this.getNextRetryDelay(previousReconnectAttempts++, Date.now() - reconnectStartTime, retryError);\r\n                        return [3 /*break*/, 6];\r\n                    case 6: return [3 /*break*/, 1];\r\n                    case 7:\r\n                        this.logger.log(LogLevel.Information, \"Reconnect retries have been exhausted after \" + (Date.now() - reconnectStartTime) + \" ms and \" + previousReconnectAttempts + \" failed attempts. Connection disconnecting.\");\r\n                        this.completeClose();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    HubConnection.prototype.getNextRetryDelay = function (previousRetryCount, elapsedMilliseconds, retryReason) {\r\n        try {\r\n            return this.reconnectPolicy.nextRetryDelayInMilliseconds({\r\n                elapsedMilliseconds: elapsedMilliseconds,\r\n                previousRetryCount: previousRetryCount,\r\n                retryReason: retryReason,\r\n            });\r\n        }\r\n        catch (e) {\r\n            this.logger.log(LogLevel.Error, \"IRetryPolicy.nextRetryDelayInMilliseconds(\" + previousRetryCount + \", \" + elapsedMilliseconds + \") threw error '\" + e + \"'.\");\r\n            return null;\r\n        }\r\n    };\r\n    HubConnection.prototype.cancelCallbacksWithError = function (error) {\r\n        var callbacks = this.callbacks;\r\n        this.callbacks = {};\r\n        Object.keys(callbacks)\r\n            .forEach(function (key) {\r\n            var callback = callbacks[key];\r\n            callback(null, error);\r\n        });\r\n    };\r\n    HubConnection.prototype.cleanupPingTimer = function () {\r\n        if (this.pingServerHandle) {\r\n            clearTimeout(this.pingServerHandle);\r\n        }\r\n    };\r\n    HubConnection.prototype.cleanupTimeout = function () {\r\n        if (this.timeoutHandle) {\r\n            clearTimeout(this.timeoutHandle);\r\n        }\r\n    };\r\n    HubConnection.prototype.createInvocation = function (methodName, args, nonblocking, streamIds) {\r\n        if (nonblocking) {\r\n            if (streamIds.length !== 0) {\r\n                return {\r\n                    arguments: args,\r\n                    streamIds: streamIds,\r\n                    target: methodName,\r\n                    type: MessageType.Invocation,\r\n                };\r\n            }\r\n            else {\r\n                return {\r\n                    arguments: args,\r\n                    target: methodName,\r\n                    type: MessageType.Invocation,\r\n                };\r\n            }\r\n        }\r\n        else {\r\n            var invocationId = this.invocationId;\r\n            this.invocationId++;\r\n            if (streamIds.length !== 0) {\r\n                return {\r\n                    arguments: args,\r\n                    invocationId: invocationId.toString(),\r\n                    streamIds: streamIds,\r\n                    target: methodName,\r\n                    type: MessageType.Invocation,\r\n                };\r\n            }\r\n            else {\r\n                return {\r\n                    arguments: args,\r\n                    invocationId: invocationId.toString(),\r\n                    target: methodName,\r\n                    type: MessageType.Invocation,\r\n                };\r\n            }\r\n        }\r\n    };\r\n    HubConnection.prototype.launchStreams = function (streams, promiseQueue) {\r\n        var _this = this;\r\n        if (streams.length === 0) {\r\n            return;\r\n        }\r\n        // Synchronize stream data so they arrive in-order on the server\r\n        if (!promiseQueue) {\r\n            promiseQueue = Promise.resolve();\r\n        }\r\n        var _loop_1 = function (streamId) {\r\n            streams[streamId].subscribe({\r\n                complete: function () {\r\n                    promiseQueue = promiseQueue.then(function () { return _this.sendWithProtocol(_this.createCompletionMessage(streamId)); });\r\n                },\r\n                error: function (err) {\r\n                    var message;\r\n                    if (err instanceof Error) {\r\n                        message = err.message;\r\n                    }\r\n                    else if (err && err.toString) {\r\n                        message = err.toString();\r\n                    }\r\n                    else {\r\n                        message = \"Unknown error\";\r\n                    }\r\n                    promiseQueue = promiseQueue.then(function () { return _this.sendWithProtocol(_this.createCompletionMessage(streamId, message)); });\r\n                },\r\n                next: function (item) {\r\n                    promiseQueue = promiseQueue.then(function () { return _this.sendWithProtocol(_this.createStreamItemMessage(streamId, item)); });\r\n                },\r\n            });\r\n        };\r\n        // We want to iterate over the keys, since the keys are the stream ids\r\n        // tslint:disable-next-line:forin\r\n        for (var streamId in streams) {\r\n            _loop_1(streamId);\r\n        }\r\n    };\r\n    HubConnection.prototype.replaceStreamingParams = function (args) {\r\n        var streams = [];\r\n        var streamIds = [];\r\n        for (var i = 0; i < args.length; i++) {\r\n            var argument = args[i];\r\n            if (this.isObservable(argument)) {\r\n                var streamId = this.invocationId;\r\n                this.invocationId++;\r\n                // Store the stream for later use\r\n                streams[streamId] = argument;\r\n                streamIds.push(streamId.toString());\r\n                // remove stream from args\r\n                args.splice(i, 1);\r\n            }\r\n        }\r\n        return [streams, streamIds];\r\n    };\r\n    HubConnection.prototype.isObservable = function (arg) {\r\n        // This allows other stream implementations to just work (like rxjs)\r\n        return arg && arg.subscribe && typeof arg.subscribe === \"function\";\r\n    };\r\n    HubConnection.prototype.createStreamInvocation = function (methodName, args, streamIds) {\r\n        var invocationId = this.invocationId;\r\n        this.invocationId++;\r\n        if (streamIds.length !== 0) {\r\n            return {\r\n                arguments: args,\r\n                invocationId: invocationId.toString(),\r\n                streamIds: streamIds,\r\n                target: methodName,\r\n                type: MessageType.StreamInvocation,\r\n            };\r\n        }\r\n        else {\r\n            return {\r\n                arguments: args,\r\n                invocationId: invocationId.toString(),\r\n                target: methodName,\r\n                type: MessageType.StreamInvocation,\r\n            };\r\n        }\r\n    };\r\n    HubConnection.prototype.createCancelInvocation = function (id) {\r\n        return {\r\n            invocationId: id,\r\n            type: MessageType.CancelInvocation,\r\n        };\r\n    };\r\n    HubConnection.prototype.createStreamItemMessage = function (id, item) {\r\n        return {\r\n            invocationId: id,\r\n            item: item,\r\n            type: MessageType.StreamItem,\r\n        };\r\n    };\r\n    HubConnection.prototype.createCompletionMessage = function (id, error, result) {\r\n        if (error) {\r\n            return {\r\n                error: error,\r\n                invocationId: id,\r\n                type: MessageType.Completion,\r\n            };\r\n        }\r\n        return {\r\n            invocationId: id,\r\n            result: result,\r\n            type: MessageType.Completion,\r\n        };\r\n    };\r\n    return HubConnection;\r\n}());\r\nexport { HubConnection };\r\n//# sourceMappingURL=HubConnection.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\n// This will be treated as a bit flag in the future, so we keep it using power-of-two values.\r\n/** Specifies a specific HTTP transport type. */\r\nexport var HttpTransportType;\r\n(function (HttpTransportType) {\r\n    /** Specifies no transport preference. */\r\n    HttpTransportType[HttpTransportType[\"None\"] = 0] = \"None\";\r\n    /** Specifies the WebSockets transport. */\r\n    HttpTransportType[HttpTransportType[\"WebSockets\"] = 1] = \"WebSockets\";\r\n    /** Specifies the Server-Sent Events transport. */\r\n    HttpTransportType[HttpTransportType[\"ServerSentEvents\"] = 2] = \"ServerSentEvents\";\r\n    /** Specifies the Long Polling transport. */\r\n    HttpTransportType[HttpTransportType[\"LongPolling\"] = 4] = \"LongPolling\";\r\n})(HttpTransportType || (HttpTransportType = {}));\r\n/** Specifies the transfer format for a connection. */\r\nexport var TransferFormat;\r\n(function (TransferFormat) {\r\n    /** Specifies that only text data will be transmitted over the connection. */\r\n    TransferFormat[TransferFormat[\"Text\"] = 1] = \"Text\";\r\n    /** Specifies that binary data will be transmitted over the connection. */\r\n    TransferFormat[TransferFormat[\"Binary\"] = 2] = \"Binary\";\r\n})(TransferFormat || (TransferFormat = {}));\r\n//# sourceMappingURL=ITransport.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { TransferFormat } from \"./ITransport\";\r\nimport { Arg, getDataDetail, getUserAgentHeader, Platform, sendMessage } from \"./Utils\";\r\n/** @private */\r\nvar ServerSentEventsTransport = /** @class */ (function () {\r\n    function ServerSentEventsTransport(httpClient, accessTokenFactory, logger, logMessageContent, eventSourceConstructor, withCredentials, headers) {\r\n        this.httpClient = httpClient;\r\n        this.accessTokenFactory = accessTokenFactory;\r\n        this.logger = logger;\r\n        this.logMessageContent = logMessageContent;\r\n        this.withCredentials = withCredentials;\r\n        this.eventSourceConstructor = eventSourceConstructor;\r\n        this.headers = headers;\r\n        this.onreceive = null;\r\n        this.onclose = null;\r\n    }\r\n    ServerSentEventsTransport.prototype.connect = function (url, transferFormat) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var token;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        Arg.isRequired(url, \"url\");\r\n                        Arg.isRequired(transferFormat, \"transferFormat\");\r\n                        Arg.isIn(transferFormat, TransferFormat, \"transferFormat\");\r\n                        this.logger.log(LogLevel.Trace, \"(SSE transport) Connecting.\");\r\n                        // set url before accessTokenFactory because this.url is only for send and we set the auth header instead of the query string for send\r\n                        this.url = url;\r\n                        if (!this.accessTokenFactory) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.accessTokenFactory()];\r\n                    case 1:\r\n                        token = _a.sent();\r\n                        if (token) {\r\n                            url += (url.indexOf(\"?\") < 0 ? \"?\" : \"&\") + (\"access_token=\" + encodeURIComponent(token));\r\n                        }\r\n                        _a.label = 2;\r\n                    case 2: return [2 /*return*/, new Promise(function (resolve, reject) {\r\n                            var opened = false;\r\n                            if (transferFormat !== TransferFormat.Text) {\r\n                                reject(new Error(\"The Server-Sent Events transport only supports the 'Text' transfer format\"));\r\n                                return;\r\n                            }\r\n                            var eventSource;\r\n                            if (Platform.isBrowser || Platform.isWebWorker) {\r\n                                eventSource = new _this.eventSourceConstructor(url, { withCredentials: _this.withCredentials });\r\n                            }\r\n                            else {\r\n                                // Non-browser passes cookies via the dictionary\r\n                                var cookies = _this.httpClient.getCookieString(url);\r\n                                var headers = {};\r\n                                headers.Cookie = cookies;\r\n                                var _a = getUserAgentHeader(), name_1 = _a[0], value = _a[1];\r\n                                headers[name_1] = value;\r\n                                eventSource = new _this.eventSourceConstructor(url, { withCredentials: _this.withCredentials, headers: __assign({}, headers, _this.headers) });\r\n                            }\r\n                            try {\r\n                                eventSource.onmessage = function (e) {\r\n                                    if (_this.onreceive) {\r\n                                        try {\r\n                                            _this.logger.log(LogLevel.Trace, \"(SSE transport) data received. \" + getDataDetail(e.data, _this.logMessageContent) + \".\");\r\n                                            _this.onreceive(e.data);\r\n                                        }\r\n                                        catch (error) {\r\n                                            _this.close(error);\r\n                                            return;\r\n                                        }\r\n                                    }\r\n                                };\r\n                                eventSource.onerror = function (e) {\r\n                                    var error = new Error(e.data || \"Error occurred\");\r\n                                    if (opened) {\r\n                                        _this.close(error);\r\n                                    }\r\n                                    else {\r\n                                        reject(error);\r\n                                    }\r\n                                };\r\n                                eventSource.onopen = function () {\r\n                                    _this.logger.log(LogLevel.Information, \"SSE connected to \" + _this.url);\r\n                                    _this.eventSource = eventSource;\r\n                                    opened = true;\r\n                                    resolve();\r\n                                };\r\n                            }\r\n                            catch (e) {\r\n                                reject(e);\r\n                                return;\r\n                            }\r\n                        })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ServerSentEventsTransport.prototype.send = function (data) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                if (!this.eventSource) {\r\n                    return [2 /*return*/, Promise.reject(new Error(\"Cannot send until the transport is connected\"))];\r\n                }\r\n                return [2 /*return*/, sendMessage(this.logger, \"SSE\", this.httpClient, this.url, this.accessTokenFactory, data, this.logMessageContent, this.withCredentials, this.headers)];\r\n            });\r\n        });\r\n    };\r\n    ServerSentEventsTransport.prototype.stop = function () {\r\n        this.close();\r\n        return Promise.resolve();\r\n    };\r\n    ServerSentEventsTransport.prototype.close = function (e) {\r\n        if (this.eventSource) {\r\n            this.eventSource.close();\r\n            this.eventSource = undefined;\r\n            if (this.onclose) {\r\n                this.onclose(e);\r\n            }\r\n        }\r\n    };\r\n    return ServerSentEventsTransport;\r\n}());\r\nexport { ServerSentEventsTransport };\r\n//# sourceMappingURL=ServerSentEventsTransport.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nimport { DefaultReconnectPolicy } from \"./DefaultReconnectPolicy\";\r\nimport { HttpConnection } from \"./HttpConnection\";\r\nimport { HubConnection } from \"./HubConnection\";\r\nimport { LogLevel } from \"./ILogger\";\r\nimport { JsonHubProtocol } from \"./JsonHubProtocol\";\r\nimport { NullLogger } from \"./Loggers\";\r\nimport { Arg, ConsoleLogger } from \"./Utils\";\r\n// tslint:disable:object-literal-sort-keys\r\nvar LogLevelNameMapping = {\r\n    trace: LogLevel.Trace,\r\n    debug: LogLevel.Debug,\r\n    info: LogLevel.Information,\r\n    information: LogLevel.Information,\r\n    warn: LogLevel.Warning,\r\n    warning: LogLevel.Warning,\r\n    error: LogLevel.Error,\r\n    critical: LogLevel.Critical,\r\n    none: LogLevel.None,\r\n};\r\nfunction parseLogLevel(name) {\r\n    // Case-insensitive matching via lower-casing\r\n    // Yes, I know case-folding is a complicated problem in Unicode, but we only support\r\n    // the ASCII strings defined in LogLevelNameMapping anyway, so it's fine -anurse.\r\n    var mapping = LogLevelNameMapping[name.toLowerCase()];\r\n    if (typeof mapping !== \"undefined\") {\r\n        return mapping;\r\n    }\r\n    else {\r\n        throw new Error(\"Unknown log level: \" + name);\r\n    }\r\n}\r\n/** A builder for configuring {@link @microsoft/signalr.HubConnection} instances. */\r\nvar HubConnectionBuilder = /** @class */ (function () {\r\n    function HubConnectionBuilder() {\r\n    }\r\n    HubConnectionBuilder.prototype.configureLogging = function (logging) {\r\n        Arg.isRequired(logging, \"logging\");\r\n        if (isLogger(logging)) {\r\n            this.logger = logging;\r\n        }\r\n        else if (typeof logging === \"string\") {\r\n            var logLevel = parseLogLevel(logging);\r\n            this.logger = new ConsoleLogger(logLevel);\r\n        }\r\n        else {\r\n            this.logger = new ConsoleLogger(logging);\r\n        }\r\n        return this;\r\n    };\r\n    HubConnectionBuilder.prototype.withUrl = function (url, transportTypeOrOptions) {\r\n        Arg.isRequired(url, \"url\");\r\n        Arg.isNotEmpty(url, \"url\");\r\n        this.url = url;\r\n        // Flow-typing knows where it's at. Since HttpTransportType is a number and IHttpConnectionOptions is guaranteed\r\n        // to be an object, we know (as does TypeScript) this comparison is all we need to figure out which overload was called.\r\n        if (typeof transportTypeOrOptions === \"object\") {\r\n            this.httpConnectionOptions = __assign({}, this.httpConnectionOptions, transportTypeOrOptions);\r\n        }\r\n        else {\r\n            this.httpConnectionOptions = __assign({}, this.httpConnectionOptions, { transport: transportTypeOrOptions });\r\n        }\r\n        return this;\r\n    };\r\n    /** Configures the {@link @microsoft/signalr.HubConnection} to use the specified Hub Protocol.\r\n     *\r\n     * @param {IHubProtocol} protocol The {@link @microsoft/signalr.IHubProtocol} implementation to use.\r\n     */\r\n    HubConnectionBuilder.prototype.withHubProtocol = function (protocol) {\r\n        Arg.isRequired(protocol, \"protocol\");\r\n        this.protocol = protocol;\r\n        return this;\r\n    };\r\n    HubConnectionBuilder.prototype.withAutomaticReconnect = function (retryDelaysOrReconnectPolicy) {\r\n        if (this.reconnectPolicy) {\r\n            throw new Error(\"A reconnectPolicy has already been set.\");\r\n        }\r\n        if (!retryDelaysOrReconnectPolicy) {\r\n            this.reconnectPolicy = new DefaultReconnectPolicy();\r\n        }\r\n        else if (Array.isArray(retryDelaysOrReconnectPolicy)) {\r\n            this.reconnectPolicy = new DefaultReconnectPolicy(retryDelaysOrReconnectPolicy);\r\n        }\r\n        else {\r\n            this.reconnectPolicy = retryDelaysOrReconnectPolicy;\r\n        }\r\n        return this;\r\n    };\r\n    /** Creates a {@link @microsoft/signalr.HubConnection} from the configuration options specified in this builder.\r\n     *\r\n     * @returns {HubConnection} The configured {@link @microsoft/signalr.HubConnection}.\r\n     */\r\n    HubConnectionBuilder.prototype.build = function () {\r\n        // If httpConnectionOptions has a logger, use it. Otherwise, override it with the one\r\n        // provided to configureLogger\r\n        var httpConnectionOptions = this.httpConnectionOptions || {};\r\n        // If it's 'null', the user **explicitly** asked for null, don't mess with it.\r\n        if (httpConnectionOptions.logger === undefined) {\r\n            // If our logger is undefined or null, that's OK, the HttpConnection constructor will handle it.\r\n            httpConnectionOptions.logger = this.logger;\r\n        }\r\n        // Now create the connection\r\n        if (!this.url) {\r\n            throw new Error(\"The 'HubConnectionBuilder.withUrl' method must be called before building the connection.\");\r\n        }\r\n        var connection = new HttpConnection(this.url, httpConnectionOptions);\r\n        return HubConnection.create(connection, this.logger || NullLogger.instance, this.protocol || new JsonHubProtocol(), this.reconnectPolicy);\r\n    };\r\n    return HubConnectionBuilder;\r\n}());\r\nexport { HubConnectionBuilder };\r\nfunction isLogger(logger) {\r\n    return logger.log !== undefined;\r\n}\r\n//# sourceMappingURL=HubConnectionBuilder.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\n/** A logger that does nothing when log messages are sent to it. */\r\nvar NullLogger = /** @class */ (function () {\r\n    function NullLogger() {\r\n    }\r\n    /** @inheritDoc */\r\n    // tslint:disable-next-line\r\n    NullLogger.prototype.log = function (_logLevel, _message) {\r\n    };\r\n    /** The singleton instance of the {@link @microsoft/signalr.NullLogger}. */\r\n    NullLogger.instance = new NullLogger();\r\n    return NullLogger;\r\n}());\r\nexport { NullLogger };\r\n//# sourceMappingURL=Loggers.js.map","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\nimport { SubjectSubscription } from \"./Utils\";\r\n/** Stream implementation to stream items to the server. */\r\nvar Subject = /** @class */ (function () {\r\n    function Subject() {\r\n        this.observers = [];\r\n    }\r\n    Subject.prototype.next = function (item) {\r\n        for (var _i = 0, _a = this.observers; _i < _a.length; _i++) {\r\n            var observer = _a[_i];\r\n            observer.next(item);\r\n        }\r\n    };\r\n    Subject.prototype.error = function (err) {\r\n        for (var _i = 0, _a = this.observers; _i < _a.length; _i++) {\r\n            var observer = _a[_i];\r\n            if (observer.error) {\r\n                observer.error(err);\r\n            }\r\n        }\r\n    };\r\n    Subject.prototype.complete = function () {\r\n        for (var _i = 0, _a = this.observers; _i < _a.length; _i++) {\r\n            var observer = _a[_i];\r\n            if (observer.complete) {\r\n                observer.complete();\r\n            }\r\n        }\r\n    };\r\n    Subject.prototype.subscribe = function (observer) {\r\n        this.observers.push(observer);\r\n        return new SubjectSubscription(this, observer);\r\n    };\r\n    return Subject;\r\n}());\r\nexport { Subject };\r\n//# sourceMappingURL=Subject.js.map","import { InfiniteScrollModule } from 'ngx-infinite-scroll';\nimport {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\n\nimport {NotificationRoutingModule} from './notification-routing.module';\nimport {NotificationComponent} from './notification/notification.component';\nimport {IconsProviderModule, NgZorroAntdModule, NzLayoutModule, NzMenuModule} from 'src/app/core/module/core.module';\n\n@NgModule({\n\tdeclarations: [NotificationComponent],\n\timports: [\n\t\tCommonModule,\n\t\tNotificationRoutingModule,\n\t\tNgZorroAntdModule,\n\t\tIconsProviderModule,\n\t\tNzLayoutModule,\n\t\tNzMenuModule,\n\t\tInfiniteScrollModule\n\t],\n\texports:[NotificationComponent]\n})\nexport class NotificationModule {}\n"]}